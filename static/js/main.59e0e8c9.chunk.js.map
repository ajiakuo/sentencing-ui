{"version":3,"sources":["theme.js","controls/FormAccordion.js","controls/FormToolbar.js","controls/FactorCheckBox.js","controls/FactorSlider.js","spec.js","util.js","parts/AppForm.js","parts/AppMenu.js","parts/CaseAccordion.js","api.js","parts/Page.js","index.js"],"names":["theme","createMuiTheme","palette","primary","indigo","secondary","blue","typography","fontFamily","join","useStyles","makeStyles","root","margin","summary","paddingLeft","details","padding","flexDirection","name","CondenseAccordion","withStyles","opacity","expanded","Accordion","CondenseAccordionSummary","minHeight","content","maxWidth","AccordionSummary","FormAccordion","props","classes","elevation","className","expandIcon","AccordionDetails","children","display","alignItems","space","flexGrow","button","marginLeft","spacing","iconSmall","marginRight","icon","FormToolbar","canSubmit","otherProps","onClear","onSubmit","clsx","Fab","size","variant","onClick","color","disabled","label","ColoredCheckbox","main","success","dark","error","checked","Checkbox","FactorCheckBox","value","defaultValue","vibe","onChange","others","Typography","component","data-vibe","e","target","scales","description","switch","minWidth","width","SwitchLikeSlider","height","marginBottom","grey","transition","transitions","create","duration","shortest","thumb","marginTop","position","borderRadius","boxShadow","shadows","left","top","right","bottom","track","rail","backgroundColor","common","black","mark","background","paper","Slider","FactorSlider","id","newValue","aria-labelledby","min","max","steps","marks","data-state","MINOR_WELFARE_ACT_AMENDMENT_DATE","Date","crimes","text","category","kind","stage","min_sentence","max_sentence","factors","valid_before","valid_after","noSend","calculated","factorGroups","title","type","courts","formatSentence","sentence","year","Math","floor","month","round","num","digits","one","pow","d","filterSpec","list","date","filter","item","undefined","useCrimes","useFactors","breakpoints","up","select","selectTitle","flexShrink","selectControl","CrimeSelect","sort","a","b","Select","displayEmpty","inputProps","MenuItem","map","crime","AppForm","group","find","factor","useFactorGroups","onCrimeChanged","onFactorChanged","Grid","container","xs","sm","md","lg","FormControl","g","defaultExpanded","AppMenu","state","anchorEl","loggedIn","handleButtonClick","bind","handleUserItemClick","handleFeedbackItemClick","handleMenuClose","this","setState","currentTarget","window","open","IconButton","aria-controls","aria-haspopup","aria-label","Menu","keepMounted","anchorOrigin","vertical","horizontal","transformOrigin","getContentAnchorEl","Boolean","onClose","ListItemIcon","Avatar","Person","ListItemText","replace","Divider","Feedback","Component","heading","metaControl","flexBasis","metaRow","metadata","caption","relevance","transform","labels","CaseAccordion","cid","case_id","m","match","court_id","groups","court","court_name","database_id","case","no","formatted_text","parseCaseID","renderFactorValue","LinearProgress","TableContainer","Table","TableHead","TableRow","TableCell","TableBody","input","AccordionActions","Button","sourceButton","endIcon","href","console","info","fetchPrediction","formData","URLSearchParams","append","specFactors","forEach","log","toString","values","valueF","apiPath","location","hostname","fetch","method","headers","body","mode","credentials","cache","response","ok","Error","status","statusText","json","data","plot_img","plot","error_margin","lower","estimation","upper","related_cases","c","_pk","caseindex","shortid2","sim","Svalue","prison_m","subject","l","Ctype","Ctext","Cvalue","f","logo","overflowX","default","paddingTop","pane","overflowY","controls","alignSelf","progress","prediction","descriptor","tipped","helpIcon","fontSize","message","textAlign","helpMessage","inlineButton","verticalAlign","App","useState","setCrime","setFactors","setStatus","setData","errorCode","setErrorCode","AppBar","Toolbar","noWrap","xl","Paper","mit_c25_2","handleFactorChanged","_","then","catch","CircularProgress","Tooltip","src","i","rel","rootElement","document","getElementById","ThemeProvider","hasChildNodes","hydrate","render"],"mappings":"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","file":"static/js/main.59e0e8c9.chunk.js","sourcesContent":["import { createMuiTheme } from '@material-ui/core/styles';\r\nimport { indigo, blue } from '@material-ui/core/colors';\r\n\r\n// Declare the main visual theme of this app.\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: indigo,\r\n    secondary: blue\r\n  },\r\n  typography: {\r\n    fontFamily: [\r\n      'Inter', 'system-ui', '\"Segoe UI\"', 'Roboto', 'Helvetica', 'Arial', 'sans-serif'\r\n    ].join(','),\r\n  },\r\n});\r\n\r\nexport default theme;\r\n","import { React } from 'react';\r\nimport { Accordion, AccordionSummary, AccordionDetails } from '@material-ui/core';\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  root: {\r\n    margin: 0,\r\n  },\r\n  summary: {\r\n    paddingLeft: 0,\r\n  },\r\n  details: {\r\n    padding: 0,\r\n    flexDirection: 'column',\r\n  }\r\n}), { name: 'FactorsAccordion' });\r\n\r\nconst CondenseAccordion = withStyles(() => ({\r\n  root: {\r\n    '&$expanded': {\r\n      margin: 0,\r\n      '&:before': {\r\n        opacity: 1,\r\n      },\r\n    },\r\n  },\r\n  expanded: {},\r\n}), { name: 'CondenseAccordion' })(Accordion);\r\n\r\nconst CondenseAccordionSummary = withStyles(() => ({\r\n  root: {\r\n    '&$expanded': {\r\n      minHeight: 'auto',\r\n    }\r\n  },\r\n  content: {\r\n    margin: '12px 0',\r\n    maxWidth: 'calc(100% - 32px)',\r\n    '&$expanded': {\r\n      margin: '12px 0',\r\n    }\r\n  },\r\n  expanded: {},\r\n}), { name: 'CondenseAccordionSummary' })(AccordionSummary);\r\n\r\nexport default function FormAccordion(props) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <CondenseAccordion elevation={0} className={classes.root} {...props}>\r\n      <CondenseAccordionSummary expandIcon={<ExpandMoreIcon />} className={classes.summary}>\r\n        {props.summary}\r\n      </CondenseAccordionSummary>\r\n      <AccordionDetails className={classes.details}>\r\n        {props.children}\r\n      </AccordionDetails>\r\n    </CondenseAccordion>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport clsx from 'clsx';\r\nimport Fab from '@material-ui/core/Fab';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport ClearAllIcon from '@material-ui/icons/ClearAll';\r\nimport SpellcheckIcon from '@material-ui/icons/Spellcheck';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n  space: {\r\n    flexGrow: 1,\r\n  },\r\n  button: {\r\n    marginLeft: theme.spacing(2),\r\n  },\r\n  iconSmall: {\r\n    marginRight: theme.spacing(1) / 2,\r\n  },\r\n  icon: {\r\n    marginRight: theme.spacing(1),\r\n  },\r\n}), { name: 'FormToolbar' });\r\n\r\nexport default function FormToolbar(props) {\r\n  const classes = useStyles();\r\n  let {canSubmit, onClear, onSubmit, ...otherProps} = props;\r\n\r\n  return (\r\n    <div {...otherProps} className={clsx([classes.root, props.className])}>\r\n      <div className={classes.space} />\r\n      <Fab className={classes.button} size=\"medium\" variant=\"extended\" onClick={props.onClear}>\r\n        <ClearAllIcon className={classes.iconSmall} />\r\n        清除\r\n      </Fab>\r\n      <Fab className={classes.button} color=\"secondary\" variant=\"extended\" disabled={!canSubmit} onClick={props.onSubmit}>\r\n        <SpellcheckIcon className={classes.icon} />\r\n        計算\r\n      </Fab>\r\n    </div>\r\n  );\r\n};\r\n","import { React } from 'react';\r\nimport { Checkbox, Typography } from '@material-ui/core';\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n  label: {\r\n    flexGrow: 1,\r\n  },\r\n}), { name: 'FactorCheckBox' });\r\n\r\nconst ColoredCheckbox = withStyles((theme) => ({\r\n  root: {\r\n    '&$checked': {\r\n      color: theme.palette.secondary.main,\r\n    },\r\n    '&[data-vibe=\"positive\"]$checked': {\r\n      color: theme.palette.success.dark,\r\n    },\r\n    '&[data-vibe=\"negative\"]$checked': {\r\n      color: theme.palette.error.dark,\r\n    },\r\n  },\r\n  checked: {},\r\n}), { name: 'ColoredCheckbox' })((props) => <Checkbox color=\"default\" {...props} />);\r\n\r\nexport default function FactorCheckBox(props) {\r\n  const classes = useStyles();\r\n  const { name, value, defaultValue, label, vibe, onChange, ...others } = props;\r\n\r\n  return (\r\n    <label className={classes.root}>\r\n      <Typography component=\"span\" className={classes.label}>{label}</Typography>\r\n      <ColoredCheckbox\r\n        name={name} data-vibe={vibe}\r\n        checked={value === 1}\r\n        defaultValue ={1}\r\n        onChange={(e) => onChange(e, name, e.target.checked ? 1 : 0)} {...others} />\r\n    </label>\r\n  );\r\n};\r\n","import { React, useState } from 'react';\r\nimport { Slider, Typography } from '@material-ui/core';\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\n\r\nconst scales = [\r\n  { value: -1, label: '−', description: '減輕' },\r\n  { value: 0, label: '', description: '不影響' },\r\n  { value: 1, label: '+', description: '加重' },\r\n];\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n  label: {\r\n    flexGrow: 1,\r\n  },\r\n  switch: {\r\n    minWidth: 64,\r\n    width: 80,\r\n    maxWidth: 96,\r\n    marginLeft: theme.spacing(2),\r\n    marginRight: theme.spacing(2),\r\n  },\r\n}), { name: 'FactorSlider' });\r\n\r\nconst SwitchLikeSlider = withStyles((theme) => ({\r\n  root: {\r\n    height: 14,\r\n    padding: '14px 0',\r\n    marginBottom: 0,\r\n    color: theme.palette.grey[50],\r\n    transition: theme.transitions.create(['color'], {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n    '&[data-state=\"lighter\"]': { color: theme.palette.success.main },\r\n    '&[data-state=\"heavier\"]': { color: theme.palette.error.main },\r\n  },\r\n  thumb: {\r\n    width: 20,\r\n    height: 20,\r\n    marginTop: (14 - 20) / 2,\r\n    marginLeft: -20 / 2,\r\n    transition: theme.transitions.create(['left', 'box-shadow'], {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n    '&::before': {\r\n      content: '\"\"',\r\n      position: 'absolute',\r\n      borderRadius: '50%',\r\n      boxShadow: theme.shadows[1],\r\n      left: 0, top: 0, right: 0, bottom: 0,\r\n    },\r\n    '&::after': {\r\n      left: -11, top: -11, right: -11, bottom: -11,\r\n    },\r\n    '&:hover': {\r\n      boxShadow: '0px 0px 0px 8px rgba(0, 0, 0, 0.16)',\r\n    },\r\n  },\r\n  track: {\r\n    height: 14,\r\n    opacity: 0.5,\r\n    width: '50% !important',\r\n    transition: theme.transitions.create(['opacity'], {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n    '[data-state=\"lighter\"] &': {\r\n      left: '0 !important',\r\n    },\r\n    '[data-state=\"neutral\"] &': {\r\n      opacity: 0,\r\n      width: '0% !important',\r\n    },\r\n    '[data-state=\"heavier\"] &': {\r\n      left: '50% !important',\r\n    },\r\n  },\r\n  rail: {\r\n    height: 14,\r\n    borderRadius: 14 / 2,\r\n    backgroundColor: theme.palette.common.black,\r\n    opacity: 0.3,\r\n  },\r\n  mark: {\r\n    height: 14,\r\n    backgroundColor: theme.palette.background.paper,\r\n    opacity: 0,\r\n    '&[data-index=\"1\"]': { opacity: 0.8 },\r\n  },\r\n}), { name: 'SwitchLikeSlider' })(Slider);\r\n\r\nexport default function FactorSlider(props) {\r\n  const classes = useStyles();\r\n  const { name, value, label, onChange, ...others } = props;\r\n\r\n  return (\r\n    <div className={classes.root} {...others}>\r\n      <Typography id={`${name}-label`} component=\"label\" className={classes.label}>\r\n        {label}\r\n      </Typography>\r\n      <SwitchLikeSlider className={classes.switch}\r\n        name={name} value={value} onChange={(e, newValue) => onChange(e, name, newValue)}\r\n        aria-labelledby={`${name}-label`}\r\n        min={-1} max={1} steps={null} marks={scales}\r\n        data-state={value === 0 ? 'neutral' : value === -1 ? 'lighter' : 'heavier'}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","// spec.js – 專案涉及條文邏輯通通在這裡。\r\n// 日期皆為新條文公布日。\r\n// 早於民國 94 年刑法修正的日期不列入條件。\r\n\r\nconst PENAL_CODE_AMENDMENT_DATE = new Date(\"2019-05-29T00:00:00+08:00\");\r\nconst MINOR_WELFARE_ACT_AMENDMENT_DATE = new Date(\"2011-11-30T00:00:00+08:00\");\r\n\r\n// The metadata was used for user-friendly crime picker.\r\n// They now only exist in git history, as the project has scaled back.\r\n\r\nconst crimes = [\r\n  {\r\n    value: 7, text: \"刑法 §328 I 普通強盜取財既遂罪 （法定刑為5年以上有期徒刑）\",\r\n    category: \"強盜\", kind: \"普通強盜\", stage: \"accomplished\",\r\n    min_sentence: 60, max_sentence: 180\r\n  },\r\n  {\r\n    value: 15, text: \"刑法 §330  I 加重強盜取財既遂罪 （法定刑為7年以上有期徒刑）\",\r\n    category: \"強盜\", kind: \"加重強盜\", stage: \"accomplished\",\r\n    min_sentence: 84, max_sentence: 180\r\n  },\r\n  {\r\n    value: 16, text: \"刑法 §330 II 加重強盜取財未遂罪 （既遂犯之法定刑為7年以上有期徒刑）\",\r\n    category: \"強盜\", kind: \"加重強盜\", stage: \"attempt\",\r\n    min_sentence: 42, max_sentence: 180\r\n  }\r\n];\r\n\r\n// The naming of the factors does not conform to the midterm report.\r\n// See API-actual.md for details.\r\n\r\nconst factors = [\r\n  { name: \"c57_1\", text: \"§57(1) 犯罪動機、目的\" },\r\n  { name: \"c57_2\", text: \"§57(2) 犯罪時所受刺激\" },\r\n  { name: \"c57_3\", text: \"§57(3) 犯罪手段\" },\r\n  { name: \"c57_4\", text: \"§57(4) 行為人生活狀況\" },\r\n  { name: \"c57_5\", text: \"§57(5) 行為人品行\" },\r\n  { name: \"c57_6\", text: \"§57(6) 行為人智識程度\" },\r\n  { name: \"c57_7\", text: \"§57(7) 行為人與被害人關係\" },\r\n  { name: \"c57_8\", text: \"§57(8) 行為人違反義務程度\" },\r\n  { name: \"c57_9\", text: \"§57(9) 犯罪所生之危險或損害\" },\r\n  { name: \"c57_10_1\", text: \"§57(10)_1 犯罪後之態度：坦承犯行\" },\r\n  { name: \"c57_10_2\", text: \"§57(10)_2 犯罪後之態度：向受害或相關人道歉取得宥恕\" },\r\n  { name: \"c57_10_3\", text: \"§57(10)_3 犯罪後之態度：向受害或相關人具體賠償\" },\r\n  { name: \"agg_c47\", text: \"§47 累犯\" },\r\n  { name: \"agg_c70\", text: \"兒少§70 成年人教唆、幫助、利用、共同或故意對兒童及少年犯罪\", valid_before: MINOR_WELFARE_ACT_AMENDMENT_DATE },\r\n  { name: \"agg_c112\", text: \"兒少§112 成年人教唆、幫助、利用、共同或故意對兒童及少年犯罪\", valid_after: MINOR_WELFARE_ACT_AMENDMENT_DATE },\r\n  { name: \"agg_c134\", text: \"§134 公務員利用職權機會\", disabled: true , noSend: true},\r\n  { name: \"mit_c18_2\", text: \"§18Ⅱ 十四歲以上未滿十八歲\" },\r\n  { name: \"mit_c18_3\", text: \"§18Ⅲ 滿八十歲\", disabled: true, noSend: true },\r\n  { name: \"mit_c19_2\", text: \"§19Ⅱ 辨識、控制能力顯著減低\" },\r\n  { name: \"mit_c20\", text: \"§20 瘖啞\", disabled: true, noSend: true },\r\n  { name: \"mit_c23\", text: \"§23 防衛過當\" , disabled: true, noSend: true},\r\n  { name: \"mit_c24_1\", text: \"§24Ⅰ 避難過當\", disabled: true, noSend: true },\r\n  { name: \"mit_c25_2\", text: \"§25Ⅱ 普通未遂\" },\r\n  { name: \"mit_c27_1\", text: \"§27Ⅰ 中止犯\" },\r\n  { name: \"mit_c30\", text: \"§30 幫助犯\" },\r\n  { name: \"mit_c31_1\", text: \"§31Ⅰ 身分犯無特定關係之共犯\", disabled: true, noSend: true },\r\n  { name: \"mit_c59\", text: \"§59 情狀顯可憫恕\" },\r\n  { name: \"mit_c62\", text: \"§62 自首\" },\r\n  { name: \"mit_c63\", text: \"§63 老幼處刑\", calculated: true, noSend: true, disabled: true },\r\n  { name: \"mit_cp14_1\", text: \"證保§14Ⅰ 污點證人\" },\r\n  { name: \"mit_cp7\", text: \"速審§7 訴訟延滯\", valid_after: new Date(\"2010-05-19T00:00:00+08:00\"), disabled: true, noSend: true },\r\n];\r\n\r\nconst factorGroups = [\r\n  {\r\n    title: \"法定加重事由\",\r\n    type: \"binary\",\r\n    vibe: \"negative\",\r\n    factors: [\"agg_c47\",\"agg_c112\", \"agg_c134\"]\r\n  },\r\n  {\r\n    title: \"法定減輕事由\",\r\n    type: \"binary\",\r\n    vibe: \"positive\",\r\n    factors: [\"mit_c18_2\", \"mit_c18_3\", \"mit_c19_2\", \"mit_c20\", \"mit_c23\", \"mit_c24_1\", \"mit_c25_2\", \"mit_c27_1\", \"mit_c30\", \"mit_c31_1\", \"mit_c59\", \"mit_c62\", \"mit_c63\", \"mit_cp14_1\", \"mit_cp7\"]\r\n  },\r\n  {\r\n    title: \"法定科刑注意事項\",\r\n    type: \"tristate\",\r\n    factors: [\"c57_1\", \"c57_2\", \"c57_3\", \"c57_4\", \"c57_5\", \"c57_6\", \"c57_7\", \"c57_8\", \"c57_9\", \"c57_10_1\",\"c57_10_2\",\"c57_10_3\"]\r\n  }\r\n];\r\n\r\nconst courts = [\r\n  { \"id\":  1, \"value\": \"TPC\", \"text\": \"司法院刑事補償\", \"description\": \"司法院刑事補償\" },\r\n  { \"id\":  2, \"value\": \"TPU\", \"text\": \"司法院訴願決定\", \"description\": \"司法院訴願決定\" },\r\n  { \"id\":  4, \"value\": \"TPS\", \"text\": \"最高法院\", \"description\": \"最高法院\" },\r\n  { \"id\":  5, \"value\": \"TPA\", \"text\": \"最高行\", \"description\": \"最高行政法院\" },\r\n  { \"id\":  6, \"value\": \"TPP\", \"text\": \"懲戒法庭\", \"description\": \"懲戒法院懲戒法庭\" },\r\n  { \"id\":  3, \"value\": \"TPJ\", \"text\": \"職務法庭\", \"description\": \"懲戒法院職務法庭\" },\r\n  { \"id\":  7, \"value\": \"TPH\", \"text\": \"高院\", \"description\": \"臺灣高等法院\" },\r\n  { \"id\":  8, \"value\": \"001\", \"text\": \"高院訴願決定\", \"description\": \"臺灣高等法院訴願決定\" },\r\n  { \"id\":  9, \"value\": \"TPB\", \"text\": \"北高行\", \"description\": \"臺北高等行政法院\" },\r\n  { \"id\": 10, \"value\": \"TCB\", \"text\": \"中高行\", \"description\": \"臺中高等行政法院\" },\r\n  { \"id\": 11, \"value\": \"KSB\", \"text\": \"高高行\", \"description\": \"高雄高等行政法院\" },\r\n  { \"id\": 12, \"value\": \"IPC\", \"text\": \"智財法院\", \"description\": \"智慧財產法院\" },\r\n  { \"id\": 13, \"value\": \"TCH\", \"text\": \"臺中高分院\", \"description\": \"臺灣高等法院臺中分院\" },\r\n  { \"id\": 14, \"value\": \"TNH\", \"text\": \"臺南高分院\", \"description\": \"臺灣高等法院臺南分院\" },\r\n  { \"id\": 15, \"value\": \"KSH\", \"text\": \"高雄高分院\", \"description\": \"臺灣高等法院高雄分院\" },\r\n  { \"id\": 16, \"value\": \"HLH\", \"text\": \"花蓮高分院\", \"description\": \"臺灣高等法院花蓮分院\" },\r\n  { \"id\": 17, \"value\": \"TPD\", \"text\": \"臺北地院\", \"description\": \"臺灣臺北地方法院\" },\r\n  { \"id\": 18, \"value\": \"SLD\", \"text\": \"士林地院\", \"description\": \"臺灣士林地方法院\" },\r\n  { \"id\": 19, \"value\": \"PCD\", \"text\": \"新北地院\", \"description\": \"臺灣新北地方法院\" },\r\n  { \"id\": 20, \"value\": \"ILD\", \"text\": \"宜蘭地院\", \"description\": \"臺灣宜蘭地方法院\" },\r\n  { \"id\": 21, \"value\": \"KLD\", \"text\": \"基隆地院\", \"description\": \"臺灣基隆地方法院\" },\r\n  { \"id\": 22, \"value\": \"TYD\", \"text\": \"桃園地院\", \"description\": \"臺灣桃園地方法院\" },\r\n  { \"id\": 23, \"value\": \"SCD\", \"text\": \"新竹地院\", \"description\": \"臺灣新竹地方法院\" },\r\n  { \"id\": 24, \"value\": \"MLD\", \"text\": \"苗栗地院\", \"description\": \"臺灣苗栗地方法院\" },\r\n  { \"id\": 25, \"value\": \"TCD\", \"text\": \"臺中地院\", \"description\": \"臺灣臺中地方法院\" },\r\n  { \"id\": 26, \"value\": \"CHD\", \"text\": \"彰化地院\", \"description\": \"臺灣彰化地方法院\" },\r\n  { \"id\": 27, \"value\": \"NTD\", \"text\": \"南投地院\", \"description\": \"臺灣南投地方法院\" },\r\n  { \"id\": 28, \"value\": \"ULD\", \"text\": \"雲林地院\", \"description\": \"臺灣雲林地方法院\" },\r\n  { \"id\": 29, \"value\": \"CYD\", \"text\": \"嘉義地院\", \"description\": \"臺灣嘉義地方法院\" },\r\n  { \"id\": 30, \"value\": \"TND\", \"text\": \"臺南地院\", \"description\": \"臺灣臺南地方法院\" },\r\n  { \"id\": 31, \"value\": \"KSD\", \"text\": \"高雄地院\", \"description\": \"臺灣高雄地方法院\" },\r\n  { \"id\": 32, \"value\": \"CTD\", \"text\": \"橋頭地院\", \"description\": \"臺灣橋頭地方法院\" },\r\n  { \"id\": 33, \"value\": \"HLD\", \"text\": \"花蓮地院\", \"description\": \"臺灣花蓮地方法院\" },\r\n  { \"id\": 34, \"value\": \"TTD\", \"text\": \"臺東地院\", \"description\": \"臺灣臺東地方法院\" },\r\n  { \"id\": 35, \"value\": \"PTD\", \"text\": \"屏東地院\", \"description\": \"臺灣屏東地方法院\" },\r\n  { \"id\": 36, \"value\": \"PHD\", \"text\": \"澎湖地院\", \"description\": \"臺灣澎湖地方法院\" },\r\n  { \"id\": 37, \"value\": \"KMH\", \"text\": \"金門高分院\", \"description\": \"福建高等法院金門分院\" },\r\n  { \"id\": 38, \"value\": \"KMD\", \"text\": \"金門地院\", \"description\": \"福建金門地方法院\" },\r\n  { \"id\": 39, \"value\": \"LCD\", \"text\": \"連江地院\", \"description\": \"福建連江地方法院\" },\r\n  { \"id\": 41, \"value\": \"KSY\", \"text\": \"高雄少家法院\", \"description\": \"臺灣高雄少年及家事法院\" },\r\n];\r\n\r\nconst noSend = [\r\n  { name: \"agg_c134\", text: \"§134 公務員利用職權機會\" },\r\n  { name: \"mit_c18_3\", text: \"§18Ⅲ 滿八十歲\" },\r\n  { name: \"mit_c20\", text: \"§20 瘖啞\" },\r\n  { name: \"mit_c23\", text: \"§23 防衛過當\" },\r\n  { name: \"mit_c24_1\", text: \"§24Ⅰ 避難過當\" },\r\n  { name: \"mit_c31_1\", text: \"§31Ⅰ 身分犯無特定關係之共犯\" },\r\n  { name: \"mit_cp7\", text: \"速審§7 訴訟延滯\" },\r\n];\r\n\r\n\r\nexport { crimes, factors, factorGroups, courts, noSend };\r\n","// util.js - Utility functions\r\n\r\nimport { crimes, factors, factorGroups, courts } from './spec';\r\n\r\nexport function parseCaseID(id) {\r\n  let m = id.match((/^(?<court>[A-Z]+),(?<year>\\d+),(?<case>[^,]+),(?<no>\\d+)$/));\r\n  if (m != null) {\r\n    // Leave out the court name if it’s Supreme Court\r\n    const court_id = m.groups.court;\r\n    let court_name = court_id === 'TPS' ? '' : (courts.find((e) => e.value == court_id)?.text || court_id);\r\n    return {\r\n      database_id: id,\r\n      court: court_id,\r\n      year: m.groups.year,\r\n      case: m.groups.case,\r\n      no: m.groups.no,\r\n      formatted_text: `${court_name} ${m.groups.year} 年度${m.groups.case}字第 ${m.groups.no} 號刑事判決`\r\n    };\r\n  }\r\n};\r\n\r\nexport function formatSentence(sentence) {\r\n  if (sentence > 0) {\r\n    let year = Math.floor(sentence / 12);\r\n    if (year > 0) {\r\n      let month = sentence % 12;\r\n      return month > 0 ? `${year} 年 ${month} 個月` : `${year} 年`; }\r\n    else\r\n      return `${sentence} 個月`; }\r\n  else\r\n    return sentence === -1 ? '無期徒刑' :\r\n           sentence === -2 ? '死刑' :\r\n           '無罪'; // 無罪推定！(*ﾟ∀ﾟ)\r\n};\r\n\r\nexport function formatCaseURL(cid) {\r\n  return `https://law.judicial.gov.tw/FJUD/qryresult.aspx?jud_court=${cid.court}&jud_sys=M&jud_year=${cid.year}&jud_case=${cid.case}&jud_no=${cid.no}&judtype=JUDBOOK`;\r\n}\r\n\r\nexport function round(num, digits) {\r\n  const one = Math.pow(10, digits);\r\n  const d = Math.round(num * one);\r\n  return `${Math.floor(d / one)}.${d % one}`;\r\n}\r\n\r\nfunction filterSpec(list) {\r\n  const date = new Date(); // TODO: Allow selecting pre-amendment items?\r\n  return list.filter((item) => (\r\n    (item.valid_before === undefined || date < item.valid_before) &&\r\n    (item.valid_after === undefined || date >= item.valid_after)\r\n  ));\r\n}\r\n\r\nexport function useCrimes() {\r\n  return filterSpec(crimes);\r\n}\r\n\r\nexport function useFactors() {\r\n  return filterSpec(factors);\r\n}\r\n\r\nexport function useFactorGroups() {\r\n  const factors = useFactors();\r\n  return factorGroups.map((group) => ({\r\n    ...group,\r\n    factors: group.factors.map((name) => factors.find((factor) => factor.name === name)),\r\n  }));\r\n}\r\n\r\nexport function useCrimeCategories() {\r\n  const crimes = useCrimes();\r\n  const categories = new Map();\r\n\r\n  crimes.forEach((crime) => {\r\n    if (!categories.has(crime.category))\r\n      categories.set(crime.category, {\r\n        title: crime.category,\r\n        kinds: new Map(),\r\n      });\r\n\r\n    let kinds = categories.get(crime.category).kinds;\r\n    if (!kinds.has(crime.kind))\r\n      kinds.set(crime.kind, {\r\n        text: crime.kind,\r\n        stages: new Set(),\r\n        variants: new Set(),\r\n        disabled: true,\r\n        disabledStages: new Set(),\r\n      });\r\n\r\n    let kind = kinds.get(crime.kind);\r\n    if (crime.stage) kind.stages.add(crime.stage);\r\n    if (crime.variant) kind.variants.add(crime.variant);\r\n    kind.disabled = kind.disabled && crime.disabled;\r\n    if (crime.disabled) kind.disabledStages.add(crime.stage);\r\n  });\r\n\r\n  for (let category of categories.values())\r\n    for (let kind of category.kinds.values()) {\r\n      // Expand as array, or null out if there are no alternatives\r\n      kind.stages = kind.stages.size > 1 ? [...kind.stages] : null;\r\n      kind.variants = kind.variants.size > 0 ? [...kind.variants] : null;\r\n    }\r\n\r\n  return categories;\r\n}\r\n\r\n// Polyfill for pre-Material UI 5.0\r\nimport { fade } from '@material-ui/core/styles/colorManipulator';\r\nexport function alpha(color, value) {\r\n  return fade(color, 1 - value);\r\n}\r\n\r\n// Not Send Some Factors to Server\r\nfunction sendfilterSpec(list) {\r\n  return list.filter((item) => (\r\n    (item.noSend === undefined )\r\n  ));\r\n}\r\n\r\nexport function sendFactors() {\r\n  const factors = useFactors();\r\n  return sendfilterSpec(factors);\r\n}\r\n","import React from 'react';\r\nimport { FormControl, Grid, MenuItem, Select, Typography } from '@material-ui/core';\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nimport FactorCheckBox from '../controls/FactorCheckBox';\r\nimport FactorSlider from '../controls/FactorSlider';;\r\nimport FormAccordion from '../controls/FormAccordion';\r\nimport { useCrimes, useFactorGroups } from '../util';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    // Dynamic grid spacing (2 -> 4)\r\n    margin: `-${theme.spacing(1)}px`,\r\n    width: `calc(100% + ${theme.spacing(2)}px)`,\r\n    '& > div': { padding: theme.spacing(1) },\r\n    [theme.breakpoints.up('md')]: {\r\n      margin: `-${theme.spacing(2)}px`,\r\n      width: `calc(100% + ${theme.spacing(4)}px)`,\r\n      '& > div': { padding: theme.spacing(2) },\r\n    }\r\n  },\r\n  select: {\r\n    margin: '12px 0',\r\n    display: 'flex',\r\n    flexDirection: 'row',\r\n  },\r\n  selectTitle: {\r\n    flexShrink: 0,\r\n  },\r\n  selectControl: {\r\n    marginLeft: theme.spacing(2),\r\n    flexGrow: 1,\r\n    flexShrink: 1,\r\n  },\r\n}), { name: 'AppForm' });\r\n\r\nconst CrimeSelect = withStyles((theme) => ({\r\n  select: {\r\n    color: theme.palette.text.secondary,\r\n    '&:focus': {\r\n      color: theme.palette.text.primary,\r\n    },\r\n  },\r\n}), { name: 'CrimeSelect' })((props) => {\r\n  const {value, ...others} = props;\r\n  const crimes = useCrimes();\r\n  crimes.sort((a, b) => a.value - b.value);\r\n\r\n  return (\r\n    <Select displayEmpty value={value >= 0 ? value : \"\"}\r\n      inputProps={{ \"aria-label\": \"罪名\" }} {...others}>\r\n      <MenuItem value=\"\" disabled>適用條文</MenuItem>\r\n      { crimes.map((crime) => (\r\n        <MenuItem key={crime.value} value={crime.value} disabled={crime.disabled}>{crime.text}</MenuItem>\r\n      )) }\r\n    </Select>\r\n  );\r\n});\r\n\r\nexport default function AppForm(props) {\r\n  const classes = useStyles();\r\n  const factorGroups = useFactorGroups();\r\n  const { crime, factors, onCrimeChanged, onFactorChanged, ...others } = props;\r\n\r\n  const handleCrimeSelectChanged = (e) => {\r\n    onCrimeChanged(e.target.value);\r\n  };\r\n\r\n  return (\r\n    <Grid container component=\"form\" className={classes.root} {...others}>\r\n      <Grid item xs={12} sm={6} md={12} lg={6} className={classes.select}>\r\n        <Typography variant=\"h6\" className={classes.selectTitle}>罪名</Typography>\r\n        <FormControl className={classes.selectControl}>\r\n          <CrimeSelect name=\"crime\" value={crime} onChange={handleCrimeSelectChanged} />\r\n        </FormControl>\r\n      </Grid>\r\n      <Grid item xs={12} sm={6} md={12} lg={6}></Grid>\r\n      <Grid item xs={12} sm={6} md={12} lg={6}>\r\n        { factorGroups.filter((g) => g.type == \"binary\").map((group) => (\r\n          <FormAccordion key={group.title} defaultExpanded={false}\r\n            summary={(<Typography variant=\"h6\">{group.title}</Typography>)}>\r\n            { group.factors.map((factor) => (\r\n              <div key={factor.name}>\r\n                <FactorCheckBox name={factor.name} value={factors[factor.name] !== undefined ? factors[factor.name] : 0} label={factor.text} vibe={group.vibe} disabled={(crime === 7 || crime === 15)  && (factor.name === \"mit_c27_1\" || factor.name === \"mit_c25_2\") ? true : factor.disabled} onChange={onFactorChanged} />\r\n              </div>\r\n            ))}\r\n          </FormAccordion>\r\n        )) }\r\n      </Grid>\r\n      <Grid item xs={12} sm={6} md={12} lg={6}>\r\n        { factorGroups.filter((g) => g.type !== \"binary\").map((group) => (\r\n          <FormAccordion key={group.title}\r\n            defaultExpanded={true}\r\n            summary={(<Typography variant=\"h6\">{group.title}</Typography>)}>\r\n            { group.factors.map((factor) => (\r\n              <div key={factor.name}>\r\n                <FactorSlider name={factor.name} value={factors[factor.name] !== undefined ? factors[factor.name] : 0} label={factor.text} onChange={onFactorChanged} disabled={factor.disabled} />\r\n              </div>\r\n            ))}\r\n          </FormAccordion>\r\n        )) }\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n};\r\n","import { React, Component } from 'react';\r\nimport { Avatar, Divider, IconButton, ListItemIcon, ListItemText, Menu, MenuItem } from '@material-ui/core';\r\nimport {\r\n  Feedback as FeedbackIcon,\r\n  MoreVert as MoreIcon,\r\n  Person as PersonIcon,\r\n  } from '@material-ui/icons';\r\n\r\n\r\nclass AppMenu extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { anchorEl: null, loggedIn: true };\r\n    this.handleButtonClick = this.handleButtonClick.bind(this);\r\n    this.handleUserItemClick = this.handleUserItemClick.bind(this);\r\n    this.handleFeedbackItemClick = this.handleFeedbackItemClick.bind(this);\r\n    this.handleMenuClose = this.handleMenuClose.bind(this);\r\n  }\r\n\r\n  handleButtonClick(e) {\r\n    this.setState({ anchorEl: e.currentTarget });\r\n  }\r\n\r\n  handleUserItemClick() {\r\n    this.setState({ loggedIn: !this.state.loggedIn });\r\n  }\r\n\r\n  handleFeedbackItemClick() {\r\n    window.open(\"https://www.judicial.gov.tw\", \"_blank\");\r\n    this.handleMenuClose();\r\n  }\r\n\r\n  handleMenuClose() {\r\n    this.setState({ anchorEl: null });\r\n  }\r\n\r\n  render() {\r\n    const anchorOrigin = { vertical: 'top', horizontal: 'right'};\r\n    const transformOrigin = { vertical: 'top', horizontal: 'right'};\r\n\r\n    return (\r\n      <>\r\n        <IconButton\r\n          aria-controls=\"menu\" aria-haspopup=\"true\"\r\n          aria-label=\"開啟功能表\" color=\"inherit\" onClick={this.handleButtonClick}>\r\n          <MoreIcon />\r\n        </IconButton>\r\n        <Menu\r\n          id=\"menu\" keepMounted anchorEl={this.state.anchorEl}\r\n          anchorOrigin={anchorOrigin} transformOrigin={transformOrigin} getContentAnchorEl={null}\r\n          open={Boolean(this.state.anchorEl)} onClose={this.handleMenuClose}>\r\n          <MenuItem onClick={this.handleUserItemClick}>\r\n            <ListItemIcon>\r\n              <Avatar>{ this.state.loggedIn ? \"陳\" : <PersonIcon /> }</Avatar>\r\n            </ListItemIcon>\r\n            <ListItemText\r\n              primary={this.state.loggedIn ? \"陳小林\" : \"訪客使用者\"}\r\n              secondary={this.state.loggedIn ? \"sl;chen@judicial;gov;tw\".replace(/;/g, '.') : \"按一下以登入\"} />\r\n          </MenuItem>\r\n          <Divider />\r\n          <MenuItem onClick={this.handleFeedbackItemClick}>\r\n            <ListItemIcon><FeedbackIcon /></ListItemIcon>\r\n            <ListItemText primary=\"回報問題\" />\r\n          </MenuItem>\r\n        </Menu>\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AppMenu;\r\n","import React from 'react';\r\nimport { Accordion, AccordionSummary, AccordionDetails, AccordionActions, Button, LinearProgress, Table, TableContainer, TableHead, TableBody, TableRow, TableCell, Typography } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport OpenInNewIcon from '@material-ui/icons/OpenInNew';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport RemoveIcon from '@material-ui/icons/Remove';\r\nimport { parseCaseID, formatSentence, formatCaseURL, round } from '../util';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  heading: {\r\n    flexGrow: 1,\r\n  },\r\n  metaControl: {\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n    minWidth: '6rem',\r\n    flexBasis: '7rem',\r\n    flexShrink: 1,\r\n    marginLeft: theme.spacing(1),\r\n  },\r\n  metaRow: {\r\n    display: 'flex',\r\n  },\r\n  metadata: {\r\n    ...theme.typography.caption,\r\n    color: theme.palette.text.secondary,\r\n    '&:first-child': {\r\n      flexGrow: 1,\r\n    }\r\n  },\r\n  relevance: {\r\n    transform: 'rotateY(180deg)',\r\n  },\r\n  details: {\r\n    flexDirection: 'column',\r\n  },\r\n  labels: {\r\n    marginTop: theme.spacing(1) - 20,\r\n    marginBottom: 20 - theme.spacing(1),\r\n  },\r\n  label: {\r\n    '&[hidden]': {\r\n      opacity: 0.54,\r\n    }\r\n  },\r\n  icon: {\r\n    padding: theme.spacing(1),\r\n  },\r\n}), { name: 'CaseAccordion' });\r\n\r\nexport default function CaseAccordion(props) {\r\n  const classes = useStyles();\r\n  const case_id = parseCaseID(props.id);\r\n\r\n  const renderFactorValue = (value) => (\r\n    value === 1 ? <AddIcon /> :\r\n    value === -1 ? <RemoveIcon /> :\r\n    value === 0 ? null :\r\n    value);\r\n\r\n  return (\r\n    <Accordion>\r\n      <AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n        <Typography variant=\"subtitle1\" className={classes.heading}>{ case_id.formatted_text }</Typography>\r\n        <div className={classes.metaControl}>\r\n          <div className={classes.metaRow}>\r\n            <Typography component=\"div\" className={classes.metadata}>{ formatSentence(props.sentence) }</Typography>\r\n            <Typography component=\"div\" className={classes.metadata}>{ round(props.relevance, 3) }</Typography>\r\n          </div>\r\n          <LinearProgress variant=\"determinate\" value={props.relevance * 100} className={classes.relevance} />\r\n        </div>\r\n      </AccordionSummary>\r\n      <AccordionDetails className={classes.details}>\r\n        { props.factors && (\r\n        <TableContainer className={classes.labels}>\r\n          <Table aria-label=\"量刑因素標記\">\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>輸入</TableCell>\r\n                <TableCell>量刑因素</TableCell>\r\n                <TableCell>本案</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              { props.factors.map((factor) => !factor.disabled &&\r\n                !(factor.name[0] !== 'c' && factor.input === 0 && factor.value === 0) &&\r\n                <TableRow key={factor.name} className={classes.label}>\r\n                  <TableCell className={classes.icon}>{ renderFactorValue(factor.input) }</TableCell>\r\n                  <TableCell>{ factor.text }</TableCell>\r\n                  <TableCell className={classes.icon}>{ renderFactorValue(factor.value) }</TableCell>\r\n                </TableRow>\r\n              )}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n        )}\r\n      </AccordionDetails>\r\n      <AccordionActions>\r\n        <Button className={classes.sourceButton} endIcon={<OpenInNewIcon />}\r\n          target=\"_blank\" href={formatCaseURL(case_id)}>\r\n          在法學資料檢索系統檢視\r\n        </Button>\r\n      </AccordionActions>\r\n    </Accordion>\r\n  );\r\n}\r\n","// api.js -\r\n// This file is where we load and treat non-spec conforming APIs, normalizing their data.\r\n\r\nimport { useFactors } from './util';\r\nimport { sendFactors } from './util';\r\n\r\nconst API_URL = 'http://35.229.167.36:443/v1/predictions'; /*! The API used in this project is not technically nor academically endorsed by the project author. */\r\nconst TESTDRIVE_API_URL = 'http://localhost:9165/v1/predictions'; // For development purpose only. Eeeesh.\r\nconst ERROR_MARGIN = 18; // MAE as given\r\n\r\nif (window)\r\n  console.info('%cNote: The coded API is not endorsed by the hosting domain. See project license for details.', 'font-style: italic; color: gray');\r\n\r\nexport const fetchPrediction = async (crime, factors) => {\r\n  // Map all the parameters to a FormData object\r\n  const formData = new URLSearchParams();\r\n  formData.append('Svalue', crime);\r\n\r\n  // Iterate over known factors or the API wouldn’t be pleased :/\r\n  \r\n  const specFactors = useFactors();\r\n  specFactors.forEach((factor) => {\r\n    let value = factors[factor.name];\r\n    formData.append(factor.name, value !== undefined ? value : 0);\r\n  });\r\n  \r\n  \r\n  \r\n  /*const specFactors = sendFactors();\r\n\r\n  specFactors.forEach((factor) => {\r\n    let value = factors[factor.name];\r\n    formData.append(factor.name, value !== undefined ? value : 0);\r\n  });\r\n  */\r\n\r\n  console.log(formData.toString());\r\n  for(let valueF of formData.values()) {\r\n    console.log(valueF);\r\n  }\r\n\r\n  // HACK: Enable the site to be hosted locally for demo purposes.\r\n  const apiPath = window && window.location.hostname === 'localhost' ? TESTDRIVE_API_URL : API_URL;\r\n  const response = await fetch(apiPath, {\r\n    method: 'POST',\r\n    headers: {\r\n      'X-Requested-With': 'Sentencing-UI',\r\n    },\r\n    body: formData,\r\n    mode: 'cors',\r\n    credentials: 'omit',\r\n    cache: 'no-store',\r\n    /* // We’re not using these options for now, but it’s nice to put it here\r\n    // in case we need a more complex implementation.\r\n    redirect: 'follow',\r\n    keepalive: false,\r\n    signal: new AbortController().signal,\r\n    */\r\n  });\r\n\r\n  if (!response.ok) {\r\n    // Note that the body of the error is just plain text error message\r\n    // instead of a proper JSON object. We’re not sniffing them here.\r\n    throw new Error(`HTTP ${response.status} ${response.statusText}`);\r\n  }\r\n\r\n  const data = await response.json();\r\n  console.log(data)\r\n  console.log(data.toString())\r\n  console.log(data.plot_img);\r\n  console.log(data.plot);\r\n\r\n  let error_margin = data.error_margin || ERROR_MARGIN;\r\n\r\n  // We used to single these into variables to perform clipping\r\n  // (i.e. limiting rendered sentence within legal bound)\r\n  // but now we’re asked to present untampered values.\r\n  // Ideally these should be done in backend ツ\r\n  let lower = data.estimation - error_margin;\r\n  let upper = data.estimation + error_margin;\r\n\r\n  // Reformat the data to match the application spec\r\n  return {\r\n    estimation: data.estimation,\r\n    error_margin: error_margin,\r\n    min_sentence: lower,\r\n    max_sentence: upper,\r\n    plot: data.plot_img,\r\n    related_cases: data.related_cases.map((c) => ({\r\n      _pk: c.caseindex,\r\n      id: c.shortid2,\r\n      relevance: c.sim,\r\n      crime: c.Svalue,\r\n      sentence: c.prison_m,\r\n      subject: c.subject,\r\n      labels: c.labels ? c.labels.map((l) => ({\r\n        factor: l.Ctype,\r\n        summary: l.Ctext,\r\n        value: l.Cvalue\r\n      })) : null,\r\n      factors: c.factors ? specFactors.map((f) => ({\r\n        name: f.name,\r\n        text: f.text,\r\n        disabled: !!(f.disabled),\r\n        input: (factors[f.name] !== undefined ? factors[f.name] : 0),\r\n        value: c.factors[f.name],\r\n      })) : null,\r\n    }))\r\n  };\r\n}\r\n","import { React, useState } from 'react';\r\nimport clsx from 'clsx';\r\nimport { AppBar, Avatar, Button, CircularProgress, Grid, Paper, Toolbar, Tooltip, Typography } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport GavelIcon from '@material-ui/icons/Gavel';\r\nimport HelpIcon from '@material-ui/icons/HelpOutline';\r\nimport FormAccordion from '../controls/FormAccordion';\r\nimport FormToolbar from '../controls/FormToolbar';\r\nimport AppForm from './AppForm';\r\nimport AppMenu from './AppMenu';\r\nimport CaseAccordion from './CaseAccordion';\r\nimport { formatSentence } from '../util';\r\nimport { fetchPrediction } from '../api';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    height: '100vh',\r\n  },\r\n  logo: {\r\n    marginRight: theme.spacing(1),\r\n    backgroundColor: theme.palette.secondary[400],\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n  },\r\n  main: {\r\n    width: '100vw',\r\n    minHeight: '100vh',\r\n    overflowX: 'hidden',\r\n    backgroundColor: theme.palette.background.default,\r\n\r\n    /* ToolBar mixin, but with padding */\r\n    paddingTop: 56,\r\n    [`${theme.breakpoints.up('xs')} and (orientation: landscape)`]: {\r\n      paddingTop: 48,\r\n    },\r\n    [theme.breakpoints.up('sm')]: {\r\n      paddingTop: 64,\r\n    },\r\n    [theme.breakpoints.up('md')]: {\r\n      height: '100vh',\r\n    }\r\n  },\r\n  pane: {\r\n    [theme.breakpoints.up('md')]: {\r\n      height: '100%',\r\n      overflowY: 'scroll',\r\n    },\r\n  },\r\n  content: {\r\n    margin: theme.spacing(4),\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n  },\r\n  controls: {\r\n    marginTop: theme.spacing(2),\r\n    alignSelf: 'end',\r\n    [theme.breakpoints.up('md')]: {\r\n      position: 'sticky',\r\n      bottom: theme.spacing(4),\r\n    },\r\n  },\r\n  progress: {\r\n    alignSelf: 'center',\r\n  },\r\n  prediction: {\r\n    padding: theme.spacing(2),\r\n  },\r\n  sentence: {\r\n    marginTop: theme.spacing(2),\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  plot: {\r\n    maxWidth: '100%',\r\n    marginTop: theme.spacing(2),\r\n  },\r\n  descriptor: {\r\n    color: theme.palette.text.secondary,\r\n  },\r\n  tipped: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n  },\r\n  helpIcon: {\r\n    fontSize: '1rem',\r\n  },\r\n  message: {\r\n    color: theme.palette.text.secondary,\r\n    textAlign: 'center',\r\n  },\r\n  helpMessage: {\r\n    '& h5': {\r\n      color: theme.palette.text.secondary,\r\n    },\r\n    '& h6': {\r\n      margin: '1em 0',\r\n      color: theme.palette.text.secondary,\r\n    },\r\n    '& li': {\r\n      marginBottom: '0.5em',\r\n    },\r\n  },\r\n  inlineButton: {\r\n    verticalAlign: 'baseline',\r\n    margin: '.5em .33em',\r\n  },\r\n}), { name: 'App' });\r\n\r\nexport default function App() {\r\n  const classes = useStyles();\r\n\r\n  // Form states\r\n  const [crime, setCrime] = useState(-1);\r\n  const [factors, setFactors] = useState({});\r\n\r\n  // Application states\r\n  const [status, setStatus] = useState('blank');\r\n  const [data, setData] = useState({});\r\n  const [errorCode, setErrorCode] = useState('');\r\n\r\n  const handleCrimeChanged = (value) => {\r\n    setCrime(value);\r\n\r\n    // HACK: Forcefully set the factor on attempted crime.\r\n    setFactors({...factors, mit_c25_2: (value == 16  ? 1 : 0)});\r\n\r\n    // It would be better to integrate the whole stuff behind `CrimeSelector`\r\n    // component (now removed, see history) and create better abstraction\r\n    // rather than mechanically splitting them into “crime” and “factors,”\r\n    // but we’re not tasked with questioning the research methods\r\n    // so maybe it’s up to the other folks to fix that.\r\n    // Don’t forget to cite that you read ’em here first!\r\n  };\r\n\r\n  const handleFactorChanged = (_, name, value) => {\r\n    setFactors((factors) => ({...factors, [name]: value}));\r\n\r\n    // HACK: Make these two factors exclusive.\r\n    // We were going to implement this in a more generic, more delicate way\r\n    // (as you can see from the specificity in spec), but due to … reasons\r\n    // we’ll just go with the easier route to satisfy “rapid deliveries.”\r\n    if (name === 'mit_c18_2' && value)\r\n      handleFactorChanged(_, 'mit_c18_3', 0);   // Do remember that value:int\r\n\r\n    else if (name === 'mit_c18_3' && value)\r\n      handleFactorChanged(_, 'mit_c18_2', 0);   // We could’ve done type checking…\r\n\r\n    // (Could’ve hard-wired more logic here\r\n    // e.g. making mit_c63 dependent to the former two factors,\r\n    // but additional contributions were considered voluntary [sic]\r\n    // and thus we’ll just stick to what we were asked to help with.)\r\n    // No need to thank for the idea above though. It’s free! ʕ •ᴥ•ʔ\r\n  };\r\n\r\n  const handleSubmitForm = () => {\r\n    // Clear out the current information\r\n    setErrorCode('');\r\n    setStatus('loading');\r\n    setData({});\r\n\r\n    // Build up form request and call API\r\n    fetchPrediction(crime, factors)\r\n    .then((data) => {\r\n      // Sort the related cases by their relevance, DESCending.\r\n      // We assume there would be no NaNs again, as they are invalid JSON values.\r\n      data.related_cases.sort((a, b) => (Math.round(b.relevance * 100) - Math.round(a.relevance * 100)));\r\n\r\n      setData(data);\r\n      setStatus('ready');\r\n    })\r\n    .catch((e) => {\r\n      console.log(e);\r\n      setErrorCode(e.message);\r\n      setStatus('error');\r\n    });\r\n  };\r\n\r\n  const handleClearForm = () => {\r\n    setCrime(-1);\r\n    setFactors({});\r\n    setStatus('blank');\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <AppBar position=\"fixed\">\r\n        <Toolbar>\r\n          <Avatar className={classes.logo}>\r\n            <GavelIcon />\r\n          </Avatar>\r\n          <Typography variant=\"h6\" noWrap className={classes.title}>\r\n            司法院量刑資訊系統\r\n          </Typography>\r\n          <AppMenu />\r\n        </Toolbar>\r\n      </AppBar>\r\n      <Grid container component=\"main\" className={classes.main}>\r\n        <Grid item xs={12} md={6} lg={7} xl={6} component={Paper} elevation={3} className={classes.pane}>\r\n          <div className={classes.content}>\r\n            <AppForm crime={crime} factors={factors} onCrimeChanged={handleCrimeChanged} onFactorChanged={handleFactorChanged} />\r\n            <FormToolbar className={classes.controls} canSubmit={crime >= 0} onSubmit={handleSubmitForm} onClear={handleClearForm} />\r\n          </div>\r\n        </Grid>\r\n        <Grid item xs={12} md={6} lg={5} xl={6} className={classes.pane}>\r\n          <div className={classes.content}>\r\n            { status === 'loading' &&\r\n              <CircularProgress className={classes.progress} />\r\n            }\r\n            { status === 'ready' &&\r\n              <Paper elevation={1} className={classes.prediction}>\r\n                <Typography variant=\"caption\" component=\"h5\" className={clsx(classes.descriptor, classes.tipped)}>\r\n                  <span>量刑估計區間</span>\r\n                  <Tooltip title={<span>\r\n                      <b>E[<i>f(x)</i>]</b>：該類型犯罪的「量刑起點」（月數）。<br />\r\n                      <b><i>f(x)</i></b>：在「量刑起點」上加減量刑因子權重後，得出的「個案量刑估計值」（月數）。<br />\r\n                      <b>「量刑估計區間」</b>：將「個案量刑估計值」加減機器學習的平均絕對誤差值（MAE）後所得區間。其上、下限顯示可能超出法定刑或處斷刑之範圍，但實際個案科刑仍應遵守法定刑和處斷刑之法律規定。\r\n                    </span>}>\r\n                    <HelpIcon className={classes.helpIcon} />\r\n                  </Tooltip>\r\n                </Typography>\r\n                <Typography variant=\"h4\" component=\"div\" className={classes.sentence}>{\r\n                  (data.min_sentence < data.max_sentence) ?\r\n                  `${formatSentence(data.min_sentence)} ~ ${formatSentence(data.max_sentence)}` :\r\n                  formatSentence(data.min_sentence)\r\n                }</Typography>\r\n                { data.plot &&\r\n                  <img src={data.plot} className={classes.plot} />\r\n                }\r\n                <FormAccordion defaultExpanded={true} summary={\r\n                  <Typography variant=\"caption\" component=\"h5\" className={clsx(classes.descriptor, classes.tipped)}>\r\n                    <span>相似判決</span>\r\n                    <Tooltip title=\"本系統提供使用者輸入之量刑因子相類似之判決，使用餘弦相似度計算數值，數值越高相似程度越高。\">\r\n                      <HelpIcon className={classes.helpIcon} />\r\n                    </Tooltip>\r\n                  </Typography>\r\n                }>\r\n                  { data.related_cases.map((i) =>\r\n                    <CaseAccordion key={i.id} {...i} />\r\n                  )}\r\n                </FormAccordion>\r\n              </Paper>\r\n            }\r\n            { status === 'blank' &&\r\n              <div className={classes.helpMessage}>\r\n                <Typography variant=\"subtitle1\" component=\"h5\">「司法院109年刑事強盜罪案件量刑資訊系統資料庫更新」</Typography>\r\n                <Typography variant=\"body2\">\r\n                  請按此下載\r\n                  <Button variant=\"outlined\" color=\"primary\" className={classes.inlineButton}\r\n                          href=\"https://web.ntnu.edu.tw/~hlshao/rob_user_guide.pdf\" rel=\"external\" target=\"_blank\">\r\n                          系統使用手冊\r\n                  </Button>\r\n                  。\r\n                </Typography>\r\n                <Typography variant=\"subtitle2\">使用說明與聲明</Typography>\r\n                <ol>\r\n                  <li><strong><u>在使用本系統前，請務必詳讀「系統使用手冊」。</u></strong>系統使用手冊之內容，包含系統原理與注意事項、瀑布圖例說明及操作方法等。</li>\r\n                  <li>本系統為實然面（法院實際上如何科刑）的展現，不能作為「應然面」（法院應如何科刑始為正確）的科刑指導。</li>\r\n                  <li>本系統是一種「量刑資訊輔助系統」，<strong>不能擴張或壓縮法院依法得審酌各種量刑相關事由的裁量空間，也不能取代法律所規定的法定刑或處斷刑之上、下限。</strong></li>\r\n                  <li>系統計算出的「量刑估計區間」是加入正負平均絕對誤差值所得出，因此區間的上、下限顯示，有可能超出法定刑或處斷刑之範圍，惟<strong><u>實際之個案科刑仍應遵守法定刑和處斷刑之法律規定。</u></strong></li>\r\n                </ol>\r\n              </div>\r\n            }\r\n            { status === 'error' &&\r\n              <div className={classes.message}>\r\n                <Typography variant=\"body1\">伺服器或網路錯誤，請再試一次。</Typography>\r\n                { errorCode && <Typography variant=\"caption\">{ errorCode }</Typography> }\r\n              </div>\r\n            }\r\n          </div>\r\n        </Grid>\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n","// index.js - 模組進入點。\r\n/*! sentencing-ui: https://github.com/ajiakuo/sentencing-ui */\r\n\r\nimport React from 'react';\r\nimport { hydrate, render } from 'react-dom';\r\nimport CSSBaseline from '@material-ui/core/CssBaseline';\r\nimport { ThemeProvider } from '@material-ui/core/styles';\r\nimport theme from './theme';\r\nimport Page from './parts/Page';\r\n\r\nconst rootElement = document.getElementById('root');\r\nconst App = (\r\n  <ThemeProvider theme={theme}>\r\n    <CSSBaseline />\r\n    <Page />\r\n  </ThemeProvider>\r\n);\r\n\r\nif (rootElement.hasChildNodes())\r\n  hydrate(App, rootElement);\r\nelse\r\n  render(App, rootElement);\r\n"],"sourceRoot":""}