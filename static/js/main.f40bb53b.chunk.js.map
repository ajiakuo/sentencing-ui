{"version":3,"sources":["theme.js","controls/FormAccordion.js","controls/FormToolbar.js","controls/FactorCheckBox.js","controls/FactorSlider.js","spec.js","util.js","parts/CrimeSelector.js","parts/AppForm.js","parts/AppMenu.js","parts/CaseAccordion.js","api.js","parts/Page.js","index.js"],"names":["theme","createMuiTheme","palette","primary","indigo","secondary","blue","typography","fontFamily","join","useStyles","makeStyles","root","margin","summary","paddingLeft","details","padding","flexDirection","name","CondenseAccordion","withStyles","opacity","expanded","Accordion","CondenseAccordionSummary","minHeight","content","maxWidth","AccordionSummary","FormAccordion","props","classes","elevation","className","expandIcon","AccordionDetails","children","display","alignItems","space","flexGrow","button","marginLeft","spacing","iconSmall","marginRight","icon","FormToolbar","canSubmit","otherProps","onClear","onSubmit","clsx","Fab","size","variant","onClick","color","disabled","label","ColoredCheckbox","main","success","dark","error","checked","Checkbox","FactorCheckBox","value","vibe","onChange","others","Typography","component","data-vibe","e","target","scales","description","switch","minWidth","width","SwitchLikeSlider","height","marginBottom","grey","transition","transitions","create","duration","shortest","thumb","marginTop","position","borderRadius","boxShadow","shadows","left","top","right","bottom","track","rail","backgroundColor","common","black","mark","background","paper","Slider","FactorSlider","id","newValue","aria-labelledby","min","max","steps","marks","data-state","MINOR_WELFARE_ACT_AMENDMENT_DATE","Date","crimes","text","category","kind","stage","factors","valid_before","valid_after","calculated","factorGroups","title","type","courts","formatSentence","sentence","year","Math","floor","month","round","num","digits","one","pow","d","filterSpec","list","date","filter","item","undefined","useCrimes","useFactors","nameOfStages","Map","tab","panel","controls","subtitle2","TabPanel","currentIndex","index","role","hidden","ToggleButton","contrastText","action","hoverOpacity","fade","Button","aria-checked","CrimeSelector","categories","forEach","crime","has","set","kinds","get","stages","Set","variants","disabledStages","add","values","f","useCrimeCategories","listOfCategories","find","c","useState","setCurrentIndex","handleFiltering","candidate","Tabs","_","indicatorColor","textColor","aria-label","map","Tab","data-crime-tab","data-title","aria-controls","FormControl","Array","from","k","FormControlLabel","control","Radio","gutterBottom","ButtonGroup","keys","s","includes","FormGroup","v","breakpoints","up","selectTitle","flexShrink","selectControl","CrimeSelect","select","sort","a","b","Select","displayEmpty","inputProps","IconComponent","MenuItem","AppForm","group","factor","useFactorGroups","onCrimeChanged","showFilter","onFactorChanged","Grid","container","xs","sm","md","lg","defaultExpanded","document","querySelector","click","stopPropagation","AppMenu","state","anchorEl","loggedIn","handleButtonClick","bind","handleUserItemClick","handleFilterItemClick","handleHelpItemClick","handleFeedbackItemClick","handleMenuClose","this","setState","currentTarget","onShowFilterChanged","window","open","IconButton","aria-haspopup","Menu","keepMounted","anchorOrigin","vertical","horizontal","transformOrigin","getContentAnchorEl","Boolean","onClose","ListItemIcon","Avatar","Person","ListItemText","replace","Divider","CheckBox","Help","Feedback","Component","heading","metaControl","flexBasis","metaRow","metadata","caption","relevance","transform","labels","CaseAccordion","cid","case_id","m","match","court_id","groups","court","court_name","database_id","case","no","formatted_text","parseCaseID","renderFactorValue","LinearProgress","TableContainer","Table","TableHead","TableRow","TableCell","TableBody","input","AccordionActions","sourceButton","endIcon","href","console","info","fetchPrediction","formData","URLSearchParams","append","specFactors","apiPath","location","hostname","fetch","method","headers","body","mode","credentials","cache","response","ok","Error","status","statusText","json","data","estimation","error_margin","plot","plot_img","related_cases","_pk","caseindex","shortid2","sim","Svalue","prison_m","subject","l","Ctype","Ctext","Cvalue","logo","overflowX","default","paddingTop","pane","overflowY","alignSelf","progress","prediction","descriptor","tipped","helpIcon","fontSize","message","textAlign","helpMessage","App","setCrime","setFactors","setShowFilter","setStatus","setData","errorCode","setErrorCode","AppBar","Toolbar","noWrap","xl","Paper","mit_c25_2","then","catch","log","CircularProgress","src","Tooltip","i","rootElement","getElementById","ThemeProvider","hasChildNodes","hydrate","render"],"mappings":"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","file":"static/js/main.f40bb53b.chunk.js","sourcesContent":["import { createMuiTheme } from '@material-ui/core/styles';\nimport { indigo, blue } from '@material-ui/core/colors';\n\n// Declare the main visual theme of this app.\nconst theme = createMuiTheme({\n  palette: {\n    primary: indigo,\n    secondary: blue\n  },\n  typography: {\n    fontFamily: [\n      'Inter', 'system-ui', '\"Segoe UI\"', 'Roboto', 'Helvetica', 'Arial', 'sans-serif'\n    ].join(','),\n  },\n});\n\nexport default theme;\n","import { React } from 'react';\nimport { Accordion, AccordionSummary, AccordionDetails } from '@material-ui/core';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nconst useStyles = makeStyles(() => ({\n  root: {\n    margin: 0,\n  },\n  summary: {\n    paddingLeft: 0,\n  },\n  details: {\n    padding: 0,\n    flexDirection: 'column',\n  }\n}), { name: 'FactorsAccordion' });\n\nconst CondenseAccordion = withStyles(() => ({\n  root: {\n    '&$expanded': {\n      margin: 0,\n      '&:before': {\n        opacity: 1,\n      },\n    },\n  },\n  expanded: {},\n}), { name: 'CondenseAccordion' })(Accordion);\n\nconst CondenseAccordionSummary = withStyles(() => ({\n  root: {\n    '&$expanded': {\n      minHeight: 'auto',\n    }\n  },\n  content: {\n    margin: '12px 0',\n    maxWidth: 'calc(100% - 32px)',\n    '&$expanded': {\n      margin: '12px 0',\n    }\n  },\n  expanded: {},\n}), { name: 'CondenseAccordionSummary' })(AccordionSummary);\n\nexport default function FormAccordion(props) {\n  const classes = useStyles();\n\n  return (\n    <CondenseAccordion elevation={0} className={classes.root} {...props}>\n      <CondenseAccordionSummary expandIcon={<ExpandMoreIcon />} className={classes.summary}>\n        {props.summary}\n      </CondenseAccordionSummary>\n      <AccordionDetails className={classes.details}>\n        {props.children}\n      </AccordionDetails>\n    </CondenseAccordion>\n  );\n};\n","import React from 'react';\nimport clsx from 'clsx';\nimport Fab from '@material-ui/core/Fab';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ClearAllIcon from '@material-ui/icons/ClearAll';\nimport SpellcheckIcon from '@material-ui/icons/Spellcheck';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    alignItems: 'center',\n  },\n  space: {\n    flexGrow: 1,\n  },\n  button: {\n    marginLeft: theme.spacing(2),\n  },\n  iconSmall: {\n    marginRight: theme.spacing(1) / 2,\n  },\n  icon: {\n    marginRight: theme.spacing(1),\n  },\n}), { name: 'FormToolbar' });\n\nexport default function FormToolbar(props) {\n  const classes = useStyles();\n  let {canSubmit, onClear, onSubmit, ...otherProps} = props;\n\n  return (\n    <div {...otherProps} className={clsx([classes.root, props.className])}>\n      <div className={classes.space} />\n      <Fab className={classes.button} size=\"medium\" variant=\"extended\" onClick={props.onClear}>\n        <ClearAllIcon className={classes.iconSmall} />\n        清除\n      </Fab>\n      <Fab className={classes.button} color=\"secondary\" variant=\"extended\" disabled={!canSubmit} onClick={props.onSubmit}>\n        <SpellcheckIcon className={classes.icon} />\n        計算\n      </Fab>\n    </div>\n  );\n};\n","import { React } from 'react';\nimport { Checkbox, Typography } from '@material-ui/core';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    alignItems: 'center',\n  },\n  label: {\n    flexGrow: 1,\n  },\n}), { name: 'FactorCheckBox' });\n\nconst ColoredCheckbox = withStyles((theme) => ({\n  root: {\n    '&$checked': {\n      color: theme.palette.secondary.main,\n    },\n    '&[data-vibe=\"positive\"]$checked': {\n      color: theme.palette.success.dark,\n    },\n    '&[data-vibe=\"negative\"]$checked': {\n      color: theme.palette.error.dark,\n    },\n  },\n  checked: {},\n}), { name: 'ColoredCheckbox' })((props) => <Checkbox color=\"default\" {...props} />);\n\nexport default function FactorCheckBox(props) {\n  const classes = useStyles();\n  const { name, value, label, vibe, onChange, ...others } = props;\n\n  return (\n    <label className={classes.root}>\n      <Typography component=\"span\" className={classes.label}>{label}</Typography>\n      <ColoredCheckbox\n        name={name} data-vibe={vibe}\n        checked={value === 1}\n        onChange={(e) => onChange(e, name, e.target.checked ? 1 : 0)} {...others} />\n    </label>\n  );\n};\n","import { React, useState } from 'react';\nimport { Slider, Typography } from '@material-ui/core';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\n\nconst scales = [\n  { value: -1, label: '−', description: '減輕' },\n  { value: 0, label: '', description: '不影響' },\n  { value: 1, label: '+', description: '加重' },\n];\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    display: 'flex',\n    alignItems: 'center',\n  },\n  label: {\n    flexGrow: 1,\n  },\n  switch: {\n    minWidth: 64,\n    width: 80,\n    maxWidth: 96,\n    marginLeft: theme.spacing(2),\n    marginRight: theme.spacing(2),\n  },\n}), { name: 'FactorSlider' });\n\nconst SwitchLikeSlider = withStyles((theme) => ({\n  root: {\n    height: 14,\n    padding: '14px 0',\n    marginBottom: 0,\n    color: theme.palette.grey[50],\n    transition: theme.transitions.create(['color'], {\n      duration: theme.transitions.duration.shortest,\n    }),\n    '&[data-state=\"lighter\"]': { color: theme.palette.success.main },\n    '&[data-state=\"heavier\"]': { color: theme.palette.error.main },\n  },\n  thumb: {\n    width: 20,\n    height: 20,\n    marginTop: (14 - 20) / 2,\n    marginLeft: -20 / 2,\n    transition: theme.transitions.create(['left', 'box-shadow'], {\n      duration: theme.transitions.duration.shortest,\n    }),\n    '&::before': {\n      content: '\"\"',\n      position: 'absolute',\n      borderRadius: '50%',\n      boxShadow: theme.shadows[1],\n      left: 0, top: 0, right: 0, bottom: 0,\n    },\n    '&::after': {\n      left: -11, top: -11, right: -11, bottom: -11,\n    },\n    '&:hover': {\n      boxShadow: '0px 0px 0px 8px rgba(0, 0, 0, 0.16)',\n    },\n  },\n  track: {\n    height: 14,\n    opacity: 0.5,\n    width: '50% !important',\n    transition: theme.transitions.create(['opacity'], {\n      duration: theme.transitions.duration.shortest,\n    }),\n    '[data-state=\"lighter\"] &': {\n      left: '0 !important',\n    },\n    '[data-state=\"neutral\"] &': {\n      opacity: 0,\n      width: '0% !important',\n    },\n    '[data-state=\"heavier\"] &': {\n      left: '50% !important',\n    },\n  },\n  rail: {\n    height: 14,\n    borderRadius: 14 / 2,\n    backgroundColor: theme.palette.common.black,\n    opacity: 0.3,\n  },\n  mark: {\n    height: 14,\n    backgroundColor: theme.palette.background.paper,\n    opacity: 0,\n    '&[data-index=\"1\"]': { opacity: 0.8 },\n  },\n}), { name: 'SwitchLikeSlider' })(Slider);\n\nexport default function FactorSlider(props) {\n  const classes = useStyles();\n  const { name, value, label, onChange, ...others } = props;\n\n  return (\n    <div className={classes.root} {...others}>\n      <Typography id={`${name}-label`} component=\"label\" className={classes.label}>\n        {label}\n      </Typography>\n      <SwitchLikeSlider className={classes.switch}\n        name={name} value={value} onChange={(e, newValue) => onChange(e, name, newValue)}\n        aria-labelledby={`${name}-label`}\n        min={-1} max={1} steps={null} marks={scales}\n        data-state={value === 0 ? 'neutral' : value === -1 ? 'lighter' : 'heavier'}\n      />\n    </div>\n  );\n};\n","// scope.js – 專案涉及條文邏輯通通在這裡。\n// 日期皆為新條文公布日。\n// 早於民國 94 年刑法修正的日期不列入條件。\n\nconst PENAL_CODE_AMENDMENT_DATE = new Date(\"2019-05-29T00:00:00+08:00\");\nconst MINOR_WELFARE_ACT_AMENDMENT_DATE = new Date(\"2011-11-30T00:00:00+08:00\");\n\nconst crimes = [\n  {\n    value: 1, text: \"§271(1) 殺人罪\",\n    category: \"殺人\", kind: \"普通殺人\", stage: \"accomplished\"\n  },\n  {\n    value: 2, text: \"§271(2),(1) 殺人未遂罪\",\n    category: \"殺人\", kind: \"普通殺人\", stage: \"attempted\"\n  },\n  {\n    value: 13, text: \"§277(2)前段 傷害致人於死罪\",\n    category: \"傷害致死\", kind: \"傷害致死\"\n  }\n];\n\n// The naming of the factors do not conform to the midterm report.\n// See API-actual.md for details.\n\nconst factors = [\n  { name: \"c57_1\", text: \"§57(1) 犯罪動機、目的\" },\n  { name: \"c57_2\", text: \"§57(2) 犯罪時所受刺激\" },\n  { name: \"c57_3\", text: \"§57(3) 犯罪手段\" },\n  { name: \"c57_4\", text: \"§57(4) 行為人生活狀況\" },\n  { name: \"c57_5\", text: \"§57(5) 行為人品行\" },\n  { name: \"c57_6\", text: \"§57(6) 行為人智識程度\" },\n  { name: \"c57_7\", text: \"§57(7) 行為人與被害人關係\" },\n  { name: \"c57_8\", text: \"§57(8) 行為人違反義務程度\" },\n  { name: \"c57_9\", text: \"§57(9) 犯罪所生之危險或損害\" },\n  { name: \"c57_10\", text: \"§57(10) 犯罪後之態度\" },\n  { name: \"agg_c47\", text: \"§47 累犯\" },\n  { name: \"agg_c112\", text: \"兒少§70 成年人教唆、幫助、利用、共同或故意對兒童及少年犯罪\", valid_before: MINOR_WELFARE_ACT_AMENDMENT_DATE },\n  { name: \"agg_c112\", text: \"兒少§112 成年人教唆、幫助、利用、共同或故意對兒童及少年犯罪\", valid_after: MINOR_WELFARE_ACT_AMENDMENT_DATE },\n  { name: \"agg_c134\", text: \"§134 公務員利用職權機會\" },\n  { name: \"mit_c18_2\", text: \"§18Ⅱ 十四歲以上未滿十八歲\" },\n  { name: \"mit_c18_3\", text: \"§18Ⅲ 滿八十歲\" },\n  { name: \"mit_c19_2\", text: \"§19Ⅱ 辨識、控制能力顯著減低\" },\n  { name: \"mit_c20\", text: \"§20 瘖啞\", disabled: true },\n  { name: \"mit_c23\", text: \"§23 防衛過當\" },\n  { name: \"mit_c24_1\", text: \"§24Ⅰ 避難過當\", disabled: true },\n  { name: \"mit_c25_2\", text: \"§25Ⅱ 普通未遂\", disabled: true },\n  { name: \"mit_c27_1\", text: \"§27Ⅰ 中止犯\" },\n  { name: \"mit_c30\", text: \"§30 幫助犯\" },\n  { name: \"mit_c31_1\", text: \"§31Ⅰ 身分犯無特定關係之共犯\", disabled: true },\n  { name: \"mit_c59\", text: \"§59 情狀顯可憫恕\" },\n  { name: \"mit_c62\", text: \"§62 自首\" },\n  { name: \"mit_c63\", text: \"§63 老幼處刑\", calculated: true },\n  { name: \"mit_cp14_1\", text: \"證保§14Ⅰ 污點證人\", disabled: true },\n  { name: \"mit_cp7\", text: \"速審§7 訴訟延滯\", valid_after: new Date(\"2010-05-19T00:00:00+08:00\"), disabled: true },\n];\n\nconst factorGroups = [\n  {\n    title: \"法定加重事由\",\n    type: \"binary\",\n    vibe: \"negative\",\n    factors: [\"agg_c47\", \"agg_c112\", \"agg_c134\"]\n  },\n  {\n    title: \"法定減輕事由\",\n    type: \"binary\",\n    vibe: \"positive\",\n    factors: [\"mit_c18_2\", \"mit_c18_3\", \"mit_c19_2\", \"mit_c20\", \"mit_c23\", \"mit_c24_1\", \"mit_c25_2\", \"mit_c27_1\", \"mit_c30\", \"mit_c31_1\", \"mit_c59\", \"mit_c62\", \"mit_c63\", \"mit_cp14_1\", \"mit_cp7\"]\n  },\n  {\n    title: \"法定科刑注意事項\",\n    type: \"tristate\",\n    factors: [\"c57_1\", \"c57_2\", \"c57_3\", \"c57_4\", \"c57_5\", \"c57_6\", \"c57_7\", \"c57_8\", \"c57_9\", \"c57_10\"]\n  }\n];\n\nconst courts = [\n  { \"id\":  1, \"value\": \"TPC\", \"text\": \"司法院刑事補償\", \"description\": \"司法院刑事補償\" },\n  { \"id\":  2, \"value\": \"TPU\", \"text\": \"司法院訴願決定\", \"description\": \"司法院訴願決定\" },\n  { \"id\":  4, \"value\": \"TPS\", \"text\": \"最高法院\", \"description\": \"最高法院\" },\n  { \"id\":  5, \"value\": \"TPA\", \"text\": \"最高行\", \"description\": \"最高行政法院\" },\n  { \"id\":  6, \"value\": \"TPP\", \"text\": \"懲戒法庭\", \"description\": \"懲戒法院懲戒法庭\" },\n  { \"id\":  3, \"value\": \"TPJ\", \"text\": \"職務法庭\", \"description\": \"懲戒法院職務法庭\" },\n  { \"id\":  7, \"value\": \"TPH\", \"text\": \"高院\", \"description\": \"臺灣高等法院\" },\n  { \"id\":  8, \"value\": \"001\", \"text\": \"高院訴願決定\", \"description\": \"臺灣高等法院訴願決定\" },\n  { \"id\":  9, \"value\": \"TPB\", \"text\": \"北高行\", \"description\": \"臺北高等行政法院\" },\n  { \"id\": 10, \"value\": \"TCB\", \"text\": \"中高行\", \"description\": \"臺中高等行政法院\" },\n  { \"id\": 11, \"value\": \"KSB\", \"text\": \"高高行\", \"description\": \"高雄高等行政法院\" },\n  { \"id\": 12, \"value\": \"IPC\", \"text\": \"智財法院\", \"description\": \"智慧財產法院\" },\n  { \"id\": 13, \"value\": \"TCH\", \"text\": \"臺中高分院\", \"description\": \"臺灣高等法院臺中分院\" },\n  { \"id\": 14, \"value\": \"TNH\", \"text\": \"臺南高分院\", \"description\": \"臺灣高等法院臺南分院\" },\n  { \"id\": 15, \"value\": \"KSH\", \"text\": \"高雄高分院\", \"description\": \"臺灣高等法院高雄分院\" },\n  { \"id\": 16, \"value\": \"HLH\", \"text\": \"花蓮高分院\", \"description\": \"臺灣高等法院花蓮分院\" },\n  { \"id\": 17, \"value\": \"TPD\", \"text\": \"臺北地院\", \"description\": \"臺灣臺北地方法院\" },\n  { \"id\": 18, \"value\": \"SLD\", \"text\": \"士林地院\", \"description\": \"臺灣士林地方法院\" },\n  { \"id\": 19, \"value\": \"PCD\", \"text\": \"新北地院\", \"description\": \"臺灣新北地方法院\" },\n  { \"id\": 20, \"value\": \"ILD\", \"text\": \"宜蘭地院\", \"description\": \"臺灣宜蘭地方法院\" },\n  { \"id\": 21, \"value\": \"KLD\", \"text\": \"基隆地院\", \"description\": \"臺灣基隆地方法院\" },\n  { \"id\": 22, \"value\": \"TYD\", \"text\": \"桃園地院\", \"description\": \"臺灣桃園地方法院\" },\n  { \"id\": 23, \"value\": \"SCD\", \"text\": \"新竹地院\", \"description\": \"臺灣新竹地方法院\" },\n  { \"id\": 24, \"value\": \"MLD\", \"text\": \"苗栗地院\", \"description\": \"臺灣苗栗地方法院\" },\n  { \"id\": 25, \"value\": \"TCD\", \"text\": \"臺中地院\", \"description\": \"臺灣臺中地方法院\" },\n  { \"id\": 26, \"value\": \"CHD\", \"text\": \"彰化地院\", \"description\": \"臺灣彰化地方法院\" },\n  { \"id\": 27, \"value\": \"NTD\", \"text\": \"南投地院\", \"description\": \"臺灣南投地方法院\" },\n  { \"id\": 28, \"value\": \"ULD\", \"text\": \"雲林地院\", \"description\": \"臺灣雲林地方法院\" },\n  { \"id\": 29, \"value\": \"CYD\", \"text\": \"嘉義地院\", \"description\": \"臺灣嘉義地方法院\" },\n  { \"id\": 30, \"value\": \"TND\", \"text\": \"臺南地院\", \"description\": \"臺灣臺南地方法院\" },\n  { \"id\": 31, \"value\": \"KSD\", \"text\": \"高雄地院\", \"description\": \"臺灣高雄地方法院\" },\n  { \"id\": 32, \"value\": \"CTD\", \"text\": \"橋頭地院\", \"description\": \"臺灣橋頭地方法院\" },\n  { \"id\": 33, \"value\": \"HLD\", \"text\": \"花蓮地院\", \"description\": \"臺灣花蓮地方法院\" },\n  { \"id\": 34, \"value\": \"TTD\", \"text\": \"臺東地院\", \"description\": \"臺灣臺東地方法院\" },\n  { \"id\": 35, \"value\": \"PTD\", \"text\": \"屏東地院\", \"description\": \"臺灣屏東地方法院\" },\n  { \"id\": 36, \"value\": \"PHD\", \"text\": \"澎湖地院\", \"description\": \"臺灣澎湖地方法院\" },\n  { \"id\": 37, \"value\": \"KMH\", \"text\": \"金門高分院\", \"description\": \"福建高等法院金門分院\" },\n  { \"id\": 38, \"value\": \"KMD\", \"text\": \"金門地院\", \"description\": \"福建金門地方法院\" },\n  { \"id\": 39, \"value\": \"LCD\", \"text\": \"連江地院\", \"description\": \"福建連江地方法院\" },\n  { \"id\": 41, \"value\": \"KSY\", \"text\": \"高雄少家法院\", \"description\": \"臺灣高雄少年及家事法院\" },\n];\n\nexport { crimes, factors, factorGroups, courts };\n","import { crimes, factors, factorGroups, courts } from './spec';\n\nexport function parseCaseID(id) {\n  let m = id.match((/^(?<court>[A-Z]+),(?<year>\\d+),(?<case>[^,]+),(?<no>\\d+)$/));\n  if (m != null) {\n    // Leave out the court name if it’s Supreme Court\n    const court_id = m.groups.court;\n    let court_name = court_id === 'TPS' ? '' : (courts.find((e) => e.value == court_id)?.text || court_id);\n    return {\n      database_id: id,\n      court: court_id,\n      year: m.groups.year,\n      case: m.groups.case,\n      no: m.groups.no,\n      formatted_text: `${court_name} ${m.groups.year} 年度${m.groups.case}字第 ${m.groups.no} 號刑事判決`\n    };\n  }\n};\n\nexport function formatSentence(sentence) {\n  if (sentence > 0) {\n    let year = Math.floor(sentence / 12);\n    if (year > 0) {\n      let month = sentence % 12;\n      return month > 0 ? `${year} 年 ${month} 個月` : `${year} 年`; }\n    else\n      return `${sentence} 個月`; }\n  else\n    return sentence === -1 ? '無期徒刑' :\n           sentence === -2 ? '死刑' :\n           '無罪'; // 無罪推定！(*ﾟ∀ﾟ)\n};\n\nexport function formatCaseURL(cid) {\n  return `https://law.judicial.gov.tw/FJUD/qryresult.aspx?jud_court=${cid.court}&jud_sys=M&jud_year=${cid.year}&jud_case=${cid.case}&jud_no=${cid.no}&judtype=JUDBOOK`;\n}\n\nexport function round(num, digits) {\n  const one = Math.pow(10, digits);\n  const d = Math.round(num * one);\n  return `${Math.floor(d / one)}.${d % one}`;\n}\n\nfunction filterSpec(list) {\n  const date = new Date(); // TODO: Allow selecting pre-amendment items?\n  return list.filter((item) => (\n    (item.valid_before === undefined || date < item.valid_before) &&\n    (item.valid_after === undefined || date >= item.valid_after)\n  ));\n}\n\nexport function useCrimes() {\n  return filterSpec(crimes);\n}\n\nexport function useFactors() {\n  return filterSpec(factors);\n}\n\nexport function useFactorGroups() {\n  const factors = useFactors();\n  return factorGroups.map((group) => ({\n    ...group,\n    factors: group.factors.map((name) => factors.find((factor) => factor.name === name)),\n  }));\n}\n\nexport function useCrimeCategories() {\n  const crimes = useCrimes();\n  const categories = new Map();\n\n  crimes.forEach((crime) => {\n    if (!categories.has(crime.category))\n      categories.set(crime.category, {\n        title: crime.category,\n        kinds: new Map(),\n      });\n\n    let kinds = categories.get(crime.category).kinds;\n    if (!kinds.has(crime.kind))\n      kinds.set(crime.kind, {\n        text: crime.kind,\n        stages: new Set(),\n        variants: new Set(),\n        disabled: true,\n        disabledStages: new Set(),\n      });\n\n    let kind = kinds.get(crime.kind);\n    if (crime.stage) kind.stages.add(crime.stage);\n    if (crime.variant) kind.variants.add(crime.variant);\n    kind.disabled = kind.disabled && crime.disabled;\n    if (crime.disabled) kind.disabledStages.add(crime.stage);\n  });\n\n  for (let category of categories.values())\n    for (let kind of category.kinds.values()) {\n      // Expand as array, or null out if there are no alternatives\n      kind.stages = kind.stages.size > 1 ? [...kind.stages] : null;\n      kind.variants = kind.variants.size > 0 ? [...kind.variants] : null;\n    }\n\n  return categories;\n}\n\n// Polyfill for pre-Material UI 5.0\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nexport function alpha(color, value) {\n  return fade(color, 1 - value);\n}\n","import { React, useState } from 'react';\n//import SwipeableViews from 'react-swipeable-views';\nimport { Tabs, Tab, ButtonGroup, Button, Checkbox, FormControl, FormControlLabel, FormGroup, Radio, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport clsx from 'clsx';\nimport { useCrimes, useCrimeCategories, alpha } from '../util';\n\nconst nameOfStages = new Map([\n  [\"preparatory\", \"預備\"],\n  [\"attempted\", \"未遂\"],\n  [\"accomplished\", \"既遂\"],\n]);\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    backgroundColor: theme.palette.background.paper,\n  },\n  tab: {\n    minWidth: 64,\n    flexGrow: 1,\n  },\n  panel: {\n    margin: theme.spacing(1),\n  },\n  controls: {\n    display: 'flex',\n    marginBottom: theme.spacing(2),\n    '&:last-child': {\n      marginBottom: 0,\n    }\n  },\n  label: {\n    color: theme.palette.text.secondary,\n    ...theme.typography.subtitle2,\n  },\n  stage: {\n    flexGrow: 1,\n  },\n}), { name: 'CrimeSelector' });\n\nconst TabPanel = (props) => {\n  const { children, currentIndex, index, ...others } = props;\n  return (\n    <div role=\"tabpanel\" hidden={currentIndex !== index} id={`crime-panel-${index}`} aria-labelledby={`crime-tab-${index}`} {...others}>\n      { currentIndex === index && children }\n    </div>\n  );\n};\n\nconst ToggleButton = (props) => {\n  const classes = makeStyles((theme) => ({\n    root: {\n    },\n    checked: {\n      backgroundColor: theme.palette.secondary.main,\n      color: theme.palette.secondary.contrastText,\n      '&:hover': {\n        backgroundColor: alpha(theme.palette.secondary.main, theme.palette.action.hoverOpacity),\n        '@media (hover: none)': {\n          backgroundColor: 'transparent',\n        },\n      },\n    },\n  }), { name: 'ToggleButton' })();\n  const { checked, className, ...others } = props;\n  return <Button aria-checked={checked} className={clsx(classes.root, checked ? classes.checked : null, className)} {...others} />;\n};\n\nexport default function CrimeSelector(props) {\n  const classes = useStyles();\n  const crimes = useCrimes();\n  const categories = useCrimeCategories();\n  const listOfCategories = [...categories.values()];\n\n  // Props\n  const { value, onChange } = props;\n\n  // Calculate controls’ state base on prop value\n  const crime = crimes.find((c) => c.value === value);\n  const category = crime ? categories.get(crime.category) : listOfCategories[0];\n  const kind = crime ? category.kinds.get(crime.kind) : null;\n\n  // Our only state; index of the active tab should be independent from prop value or you will never be able to change tabs\n  const [currentIndex, setCurrentIndex] = useState(0);\n\n  // Event handlers\n  const handleTabChange = (_, newValue) => setCurrentIndex(newValue);\n\n  const handleFiltering = (e, kind, stage, variant) => {\n    let candidate = crimes.find((c) => (kind === c.kind && (!stage || stage === c.stage) && (!variant || variant === c.variant)));\n    if (candidate) onChange(e, candidate.value);\n  };\n\n  return (\n    <div className={classes.root}>\n      <Tabs value={currentIndex} onChange={handleTabChange}\n        indicatorColor=\"primary\" textColor=\"primary\" variant=\"fullWidth\" aria-label=\"罪名分類\">\n        { listOfCategories.map((c, index) =>\n          <Tab key={c.title} value={index} label={c.title} data-crime-tab data-title={c.title}\n            id={`crime-tab-${index}`} aria-controls={`crime-panel-${index}`} className={classes.tab} />\n        )}\n      </Tabs>\n      { listOfCategories.map((c, index) =>\n        <TabPanel key={c.title} currentIndex={currentIndex} index={index} className={classes.panel}>\n          <FormControl component=\"fieldset\">\n            { Array.from(c.kinds.values(), (k) =>\n              <FormControlLabel key={k.text} value={k.text} checked={k.text === kind?.text} disabled={k.disabled} control={<Radio />} label={k.text} onClick={(e) => handleFiltering(e, e.target.value)} />\n            )}\n          </FormControl>\n        </TabPanel>\n      )}\n      <div className={classes.panel}>\n        { (kind?.stages) &&\n          <FormControl component=\"fieldset\" className={classes.controls}>\n            <Typography component=\"label\" id=\"stages-label\" className={classes.label} gutterBottom>犯罪階段</Typography>\n            <ButtonGroup color=\"primary\" variant=\"outlined\" role=\"radiogroup\" aria-labelledby=\"stages-label\">\n              { Array.from(nameOfStages.keys(), (s) => kind.stages.includes(s) &&\n                <ToggleButton key={s} role=\"radio\" checked={crime.stage === s} disabled={kind.disabledStages.has(s)} onClick={(e) => handleFiltering(e, crime.kind, s)} className={classes.stage}>{nameOfStages.get(s)}</ToggleButton>\n              )}\n            </ButtonGroup>\n          </FormControl>\n        }\n        { (kind?.variants) &&\n          <FormControl component=\"fieldset\" className={classes.controls}>\n            <Typography component=\"legend\" className={classes.label}>特別規定</Typography>\n            <FormGroup>\n              { kind.variants.map((v) =>\n                <FormControlLabel key={v} label={v} control={\n                  <Checkbox checked={crime.variant === v} onChange={(e) => handleFiltering(e, crime.kind, crime.stage, e.target.checked ? v : null)} />\n                } />\n              )}\n            </FormGroup>\n          </FormControl>\n        }\n      </div>\n    </div>\n  );\n};\n","import { React, useState } from 'react';\nimport { FormControl, Grid, MenuItem, Select, Typography } from '@material-ui/core';\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\nimport FactorCheckBox from '../controls/FactorCheckBox';\nimport FactorSlider from '../controls/FactorSlider';;\nimport FormAccordion from '../controls/FormAccordion';\nimport CrimeSelector from './CrimeSelector';\nimport { useCrimes, useFactorGroups } from '../util';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    // Dynamic grid spacing (2 -> 4)\n    margin: `-${theme.spacing(1)}px`,\n    width: `calc(100% + ${theme.spacing(2)}px)`,\n    '& > div': { padding: theme.spacing(1) },\n    [theme.breakpoints.up('md')]: {\n      margin: `-${theme.spacing(2)}px`,\n      width: `calc(100% + ${theme.spacing(4)}px)`,\n      '& > div': { padding: theme.spacing(2) },\n    }\n  },\n  selectTitle: {\n    flexShrink: 0,\n  },\n  selectControl: {\n    marginLeft: theme.spacing(2),\n    flexGrow: 1,\n    flexShrink: 1,\n  },\n}), { name: 'AppForm' });\n\nconst CrimeSelect = withStyles((theme) => ({\n  select: {\n    color: theme.palette.text.secondary,\n    '&:focus': {\n      color: theme.palette.text.primary,\n    },\n  },\n}), { name: 'CrimeSelect' })((props) => {\n  const {value, ...others} = props;\n  const crimes = useCrimes();\n  crimes.sort((a, b) => a.value - b.value);\n\n  return (\n    <Select displayEmpty value={value >= 0 ? value : \"\"}\n      inputProps={{ \"aria-label\": \"罪名\" }} IconComponent=\"div\" {...others}>\n      <MenuItem value=\"\" disabled>適用條文</MenuItem>\n      { crimes.map((crime) => (\n        <MenuItem key={crime.value} value={crime.value} disabled={crime.disabled}>{crime.text}</MenuItem>\n      )) }\n    </Select>\n  );\n});\n\nexport default function AppForm(props) {\n  const classes = useStyles();\n  const factorGroups = useFactorGroups();\n  const { crime, factors, showFilter, onCrimeChanged, onFactorChanged, ...others } = props;\n\n  const handleCrimeSelectChanged = (e) => {\n    onCrimeChanged(e.target.value);\n\n    // Find and switch to the selected tab\n    const crimes = useCrimes();\n    const crime = crimes.find((c) => c.value === e.target.value);\n    document.querySelector(`button[data-crime-tab][data-title=${crime.category}]`)?.click();\n  };\n\n  const handleCrimeSelectorChanged = (e, newValue) => {\n    onCrimeChanged(newValue);\n  };\n\n  return (\n    <Grid container component=\"form\" className={classes.root} {...others}>\n      <Grid item xs={12} sm={6} md={12} lg={6}>\n        <FormAccordion defaultExpanded={true}\n          summary={(\n            <>\n              <Typography variant=\"h6\" className={classes.selectTitle}>罪名</Typography>\n              <FormControl className={classes.selectControl}>\n                <CrimeSelect name=\"crime\" value={crime}\n                  onChange={handleCrimeSelectChanged}\n                  onClick={(e) => e.stopPropagation()} />\n              </FormControl>\n            </>\n          )}>\n          <CrimeSelector value={crime} onChange={handleCrimeSelectorChanged} />\n        </FormAccordion>\n      </Grid>\n      <Grid item xs={12} sm={6} md={12} lg={6}>\n        { factorGroups.map((group) => (\n          <FormAccordion key={group.title}\n            defaultExpanded={group.type !== \"binary\"}\n            summary={(<Typography variant=\"h6\">{group.title}</Typography>)}>\n            { group.factors.map((factor) => (\n              <div key={factor.name}>\n                { group.type === \"binary\" ?\n                  <FactorCheckBox name={factor.name} value={factors[factor.name] !== undefined ? factors[factor.name] : 0} label={factor.text} vibe={group.vibe} disabled={factor.disabled} onChange={onFactorChanged} /> :\n                  <FactorSlider name={factor.name} value={factors[factor.name] !== undefined ? factors[factor.name] : 0} label={factor.text} onChange={onFactorChanged} disabled={factor.disabled} />\n                }\n              </div>\n              ))}\n          </FormAccordion>\n        )) }\n      </Grid>\n    </Grid>\n  );\n};\n","import { React, Component } from 'react';\nimport { Avatar, Divider, IconButton, ListItemIcon, ListItemText, Menu, MenuItem } from '@material-ui/core';\nimport {\n  CheckBox as CheckBoxIcon,\n  CheckBoxOutlineBlank as UncheckedBoxIcon,\n  Feedback as FeedbackIcon,\n  Help as HelpIcon,\n  MoreVert as MoreIcon,\n  Person as PersonIcon,\n  } from '@material-ui/icons';\n\n\nclass AppMenu extends Component {\n  constructor(props) {\n    super(props);\n    this.state = { anchorEl: null, loggedIn: true };\n    this.handleButtonClick = this.handleButtonClick.bind(this);\n    this.handleUserItemClick = this.handleUserItemClick.bind(this);\n    this.handleFilterItemClick = this.handleFilterItemClick.bind(this);\n    this.handleHelpItemClick = this.handleHelpItemClick.bind(this);\n    this.handleFeedbackItemClick = this.handleFeedbackItemClick.bind(this);\n    this.handleMenuClose = this.handleMenuClose.bind(this);\n  }\n\n  handleButtonClick(e) {\n    this.setState({ anchorEl: e.currentTarget });\n  }\n\n  handleUserItemClick() {\n    this.setState({ loggedIn: !this.state.loggedIn });\n  }\n\n  handleFilterItemClick() {\n    // Use props showFilter and onShowFilterChanged\n    this.onShowFilterChanged(!this.props.showFilter);\n    this.handleMenuClose();  // Should we close menu for this one?\n  }\n\n  handleHelpItemClick() {\n    this.handleMenuClose();\n  }\n\n  handleFeedbackItemClick() {\n    window.open(\"https://www.judicial.gov.tw\", \"_blank\");\n    this.handleMenuClose();\n  }\n\n  handleMenuClose() {\n    this.setState({ anchorEl: null });\n  }\n\n  render() {\n    const anchorOrigin = { vertical: 'top', horizontal: 'right'};\n    const transformOrigin = { vertical: 'top', horizontal: 'right'};\n\n    return (\n      <>\n        <IconButton\n          aria-controls=\"menu\" aria-haspopup=\"true\"\n          aria-label=\"開啟功能表\" color=\"inherit\" onClick={this.handleButtonClick}>\n          <MoreIcon />\n        </IconButton>\n        <Menu\n          id=\"menu\" keepMounted anchorEl={this.state.anchorEl}\n          anchorOrigin={anchorOrigin} transformOrigin={transformOrigin} getContentAnchorEl={null}\n          open={Boolean(this.state.anchorEl)} onClose={this.handleMenuClose}>\n          <MenuItem onClick={this.handleUserItemClick}>\n            <ListItemIcon>\n              <Avatar>{ this.state.loggedIn ? \"陳\" : <PersonIcon /> }</Avatar>\n            </ListItemIcon>\n            <ListItemText\n              primary={this.state.loggedIn ? \"陳小林\" : \"訪客使用者\"}\n              secondary={this.state.loggedIn ? \"sl;chen@judicial;gov;tw\".replace(/;/g, '.') : \"按一下以登入\"} />\n          </MenuItem>\n          <Divider />\n          <MenuItem onClick={this.handleFilterItemClick} disabled>\n            <ListItemIcon>\n              { this.props.showFilter ? <CheckBoxIcon color=\"secondary\" /> : <UncheckedBoxIcon /> }\n            </ListItemIcon>\n            <ListItemText primary=\"顯示修正前條文\" />\n          </MenuItem>\n          <MenuItem onClick={this.handleHelpItemClick}>\n            <ListItemIcon><HelpIcon /></ListItemIcon>\n            <ListItemText primary=\"使用說明\" />\n          </MenuItem>\n          <MenuItem onClick={this.handleFeedbackItemClick}>\n            <ListItemIcon><FeedbackIcon /></ListItemIcon>\n            <ListItemText primary=\"回報問題\" />\n          </MenuItem>\n        </Menu>\n      </>\n    );\n  }\n}\n\nexport default AppMenu;\n","import React from 'react';\nimport { Accordion, AccordionSummary, AccordionDetails, AccordionActions, Button, LinearProgress, Table, TableContainer, TableHead, TableBody, TableRow, TableCell, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport OpenInNewIcon from '@material-ui/icons/OpenInNew';\nimport AddIcon from '@material-ui/icons/Add';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport { parseCaseID, formatSentence, formatCaseURL, round } from '../util';\n\nconst useStyles = makeStyles((theme) => ({\n  heading: {\n    flexGrow: 1,\n  },\n  metaControl: {\n    display: 'flex',\n    flexDirection: 'column',\n    minWidth: '6rem',\n    flexBasis: '7rem',\n    flexShrink: 1,\n    marginLeft: theme.spacing(1),\n  },\n  metaRow: {\n    display: 'flex',\n  },\n  metadata: {\n    ...theme.typography.caption,\n    color: theme.palette.text.secondary,\n    '&:first-child': {\n      flexGrow: 1,\n    }\n  },\n  relevance: {\n    transform: 'rotateY(180deg)',\n  },\n  details: {\n    flexDirection: 'column',\n  },\n  labels: {\n    marginTop: theme.spacing(1) - 20,\n    marginBottom: 20 - theme.spacing(1),\n  },\n  label: {\n    '&[hidden]': {\n      opacity: 0.54,\n    }\n  },\n  icon: {\n    padding: theme.spacing(1),\n  },\n}), { name: 'CaseAccordion' });\n\nexport default function CaseAccordion(props) {\n  const classes = useStyles();\n  const case_id = parseCaseID(props.id);\n\n  const renderFactorValue = (value) => (\n    value === 1 ? <AddIcon /> :\n    value === -1 ? <RemoveIcon /> :\n    value === 0 ? null :\n    value);\n\n  return (\n    <Accordion>\n      <AccordionSummary expandIcon={<ExpandMoreIcon />}>\n        <Typography variant=\"subtitle1\" className={classes.heading}>{ case_id.formatted_text }</Typography>\n        <div className={classes.metaControl}>\n          <div className={classes.metaRow}>\n            <Typography component=\"div\" className={classes.metadata}>{ formatSentence(props.sentence) }</Typography>\n            <Typography component=\"div\" className={classes.metadata}>{ round(props.relevance, 3) }</Typography>\n          </div>\n          <LinearProgress variant=\"determinate\" value={props.relevance * 100} className={classes.relevance} />\n        </div>\n      </AccordionSummary>\n      <AccordionDetails className={classes.details}>\n        { props.factors && (\n        <TableContainer className={classes.labels}>\n          <Table aria-label=\"量刑因素標記\">\n            <TableHead>\n              <TableRow>\n                <TableCell>輸入</TableCell>\n                <TableCell>量刑因素</TableCell>\n                <TableCell>本案</TableCell>\n              </TableRow>\n            </TableHead>\n            <TableBody>\n              { props.factors.map((factor) => !factor.disabled &&\n                !(factor.name[0] !== 'c' && factor.input === 0 && factor.value === 0) &&\n                <TableRow key={factor.name} className={classes.label}>\n                  <TableCell className={classes.icon}>{ renderFactorValue(factor.input) }</TableCell>\n                  <TableCell>{ factor.text }</TableCell>\n                  <TableCell className={classes.icon}>{ renderFactorValue(factor.value) }</TableCell>\n                </TableRow>\n              )}\n            </TableBody>\n          </Table>\n        </TableContainer>\n        )}\n      </AccordionDetails>\n      <AccordionActions>\n        <Button className={classes.sourceButton} endIcon={<OpenInNewIcon />}\n          target=\"_blank\" href={formatCaseURL(case_id)}>\n          在法學資料檢索系統檢視\n        </Button>\n      </AccordionActions>\n    </Accordion>\n  );\n}\n","// api.js -\n// This file is where we load and treat non-spec conforming APIs, normalizing their data.\n\nimport { useFactors } from './util';\n\nconst API_URL = 'https://35.229.167.36/v1/predictions'; /*! The API used in this project is not technically nor academically endorsed by the project author. */\nconst TESTDRIVE_API_URL = 'http://localhost:9165/v1/predictions'; // For development purpose only. Eeeesh.\nconst ERROR_MARGIN = 18; // MAE as given\n\nif (window)\n  console.info('%cNote: The coded API is not endorsed by the hosting domain. See project license for details.', 'font-style: italic; color: gray');\n\nexport const fetchPrediction = async (crime, factors) => {\n  // Map all the parameters to a FormData object\n  const formData = new URLSearchParams();\n  formData.append('Svalue', crime);\n\n  // Iterate over known factors or the API wouldn’t be pleased :/\n  const specFactors = useFactors()\n  specFactors.forEach((factor) => {\n    let value = factors[factor.name];\n    formData.append(factor.name, value !== undefined ? value : 0);\n  });\n\n  // HACK: Enable the site to be hosted locally for demo purposes.\n  const apiPath = window && window.location.hostname === 'localhost' ? TESTDRIVE_API_URL : API_URL;\n  const response = await fetch(apiPath, {\n    method: 'POST',\n    headers: {\n      'X-Requested-With': 'Sentencing-UI',\n    },\n    body: formData,\n    mode: 'cors',\n    credentials: 'omit',\n    cache: 'no-store',\n    /* // We’re not using these options for now, but it’s nice to put it here\n    // in case we need a more complex implementation.\n    redirect: 'follow',\n    keepalive: false,\n    signal: new AbortController().signal,\n    */\n  });\n\n  if (!response.ok) {\n    // Note that the body of the error is just plain text error message\n    // instead of a proper JSON object. We’re not sniffing them here.\n    throw new Error(`HTTP ${response.status} ${response.statusText}`);\n  }\n\n  const data = await response.json();\n\n  // Reformat the data to match the application spec\n  return {\n    estimation: data.estimation,\n    error_margin: data.error_margin || ERROR_MARGIN,\n    plot: data.plot_img,\n    related_cases: data.related_cases.map((c) => ({\n      _pk: c.caseindex,\n      id: c.shortid2,\n      relevance: c.sim,\n      crime: c.Svalue,\n      sentence: c.prison_m,\n      subject: c.subject,\n      labels: c.labels ? c.labels.map((l) => ({\n        factor: l.Ctype,\n        summary: l.Ctext,\n        value: l.Cvalue\n      })) : null,\n      factors: c.factors ? specFactors.map((f) => ({\n        name: f.name,\n        text: f.text,\n        disabled: !!(f.disabled),\n        input: (factors[f.name] !== undefined ? factors[f.name] : 0),\n        value: c.factors[f.name],\n      })) : null,\n    }))\n  };\n}\n","import { React, useState } from 'react';\nimport clsx from 'clsx';\nimport { AppBar, Avatar, CircularProgress, Grid, Paper, Toolbar, Tooltip, Typography } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport GavelIcon from '@material-ui/icons/Gavel';\nimport HelpIcon from '@material-ui/icons/HelpOutline';\nimport FormAccordion from '../controls/FormAccordion';\nimport FormToolbar from '../controls/FormToolbar';\nimport AppForm from './AppForm';\nimport AppMenu from './AppMenu';\nimport CaseAccordion from './CaseAccordion';\nimport { formatSentence } from '../util';\nimport { fetchPrediction } from '../api';\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    height: '100vh',\n  },\n  logo: {\n    marginRight: theme.spacing(1),\n    backgroundColor: theme.palette.secondary[400],\n  },\n  title: {\n    flexGrow: 1,\n  },\n  main: {\n    width: '100vw',\n    minHeight: '100vh',\n    overflowX: 'hidden',\n    backgroundColor: theme.palette.background.default,\n\n    /* ToolBar mixin, but with padding */\n    paddingTop: 56,\n    [`${theme.breakpoints.up('xs')} and (orientation: landscape)`]: {\n      paddingTop: 48,\n    },\n    [theme.breakpoints.up('sm')]: {\n      paddingTop: 64,\n    },\n    [theme.breakpoints.up('md')]: {\n      height: '100vh',\n    }\n  },\n  pane: {\n    [theme.breakpoints.up('md')]: {\n      height: '100%',\n      overflowY: 'scroll',\n    },\n  },\n  content: {\n    margin: theme.spacing(4),\n    display: 'flex',\n    flexDirection: 'column',\n  },\n  controls: {\n    marginTop: theme.spacing(2),\n    alignSelf: 'end',\n    [theme.breakpoints.up('md')]: {\n      position: 'sticky',\n      bottom: theme.spacing(4),\n    },\n  },\n  progress: {\n    alignSelf: 'center',\n  },\n  prediction: {\n    padding: theme.spacing(2),\n  },\n  sentence: {\n    marginTop: theme.spacing(2),\n    marginBottom: theme.spacing(2),\n  },\n  plot: {\n    maxWidth: '100%',\n    marginTop: theme.spacing(2),\n  },\n  descriptor: {\n    color: theme.palette.text.secondary,\n  },\n  tipped: {\n    display: 'flex',\n    alignItems: 'center',\n  },\n  helpIcon: {\n    fontSize: '1rem',\n  },\n  message: {\n    color: theme.palette.text.secondary,\n    textAlign: 'center',\n  },\n  helpMessage: {\n    color: theme.palette.text.secondary,\n  },\n}), { name: 'App' });\n\nexport default function App() {\n  const classes = useStyles();\n\n  // Form states\n  const [crime, setCrime] = useState(-1);\n  const [factors, setFactors] = useState({});\n  const [showFilter, setShowFilter] = useState(false);\n\n  // Application states\n  const [status, setStatus] = useState('blank');\n  const [data, setData] = useState({});\n  const [errorCode, setErrorCode] = useState('');\n\n  const handleCrimeChanged = (value) => {\n    setCrime(value);\n\n    // HACK: Forcefully set the factor on attempted crime.\n    setFactors({...factors, mit_c25_2: (value == 2 ? 1 : 0)});\n  };\n\n  const handleFactorChanged = (_, name, value) => {\n    setFactors((factors) => ({...factors, [name]: value}));\n  };\n\n  const handleSubmitForm = () => {\n    // Clear out the current information\n    setErrorCode('');\n    setStatus('loading');\n    setData({});\n\n    // Build up form request and call API\n    fetchPrediction(crime, factors)\n    .then((data) => {\n      // Sort the related cases by their relevance, DESCending.\n      // We assume there would be no NaNs again, as they are invalid JSON values.\n      data.related_cases.sort((a, b) => (Math.round(b.relevance * 100) - Math.round(a.relevance * 100)));\n\n      setData(data);\n      setStatus('ready');\n    })\n    .catch((e) => {\n      console.log(e);\n      setErrorCode(e.message);\n      setStatus('error');\n    });\n  };\n\n  const handleClearForm = () => {\n    setCrime(-1);\n    setFactors({});\n    setStatus('blank');\n  };\n\n  return (\n    <div className={classes.root}>\n      <AppBar position=\"fixed\">\n        <Toolbar>\n          <Avatar className={classes.logo}>\n            <GavelIcon />\n          </Avatar>\n          <Typography variant=\"h6\" noWrap className={classes.title}>\n            司法院量刑資訊系統\n          </Typography>\n          <AppMenu showFilter={showFilter} onShowFilterChanged={setShowFilter} />\n        </Toolbar>\n      </AppBar>\n      <Grid container component=\"main\" className={classes.main}>\n        <Grid item xs={12} md={6} lg={7} xl={6} component={Paper} elevation={3} className={classes.pane}>\n          <div className={classes.content}>\n            <AppForm crime={crime} factors={factors} showFilter={showFilter} onCrimeChanged={handleCrimeChanged} onFactorChanged={handleFactorChanged} />\n            <FormToolbar className={classes.controls} canSubmit={crime >= 0} onSubmit={handleSubmitForm} onClear={handleClearForm} />\n          </div>\n        </Grid>\n        <Grid item xs={12} md={6} lg={5} xl={6} className={classes.pane}>\n          <div className={classes.content}>\n            { status === 'loading' &&\n              <CircularProgress className={classes.progress} />\n            }\n            { status === 'ready' &&\n              <Paper elevation={1} className={classes.prediction}>\n                <Typography variant=\"caption\" component=\"h5\" className={classes.descriptor}>量刑估計區間</Typography>\n                <Typography variant=\"h4\" component=\"div\" className={classes.sentence}>{\n                  data.estimation > data.error_margin ?\n                  `${formatSentence(data.estimation - data.error_margin)} ~ ${formatSentence(data.estimation + data.error_margin)}` :\n                  formatSentence(data.estimation)\n                }</Typography>\n                { data.plot &&\n                  <img src={data.plot} className={classes.plot} />\n                }\n                <FormAccordion defaultExpanded={true} summary={\n                  <Typography variant=\"caption\" component=\"h5\" className={clsx(classes.descriptor, classes.tipped)}>\n                    <span>相似判決</span>\n                    <Tooltip title=\"本系統提供使用者輸入之量刑因子相類似之判決，使用餘弦相似度計算數值，數值越高相似程度越高。\">\n                      <HelpIcon className={classes.helpIcon} />\n                    </Tooltip>\n                  </Typography>\n                }>\n                  { data.related_cases.map((i) =>\n                    <CaseAccordion key={i.id} {...i} />\n                  )}\n                </FormAccordion>\n              </Paper>\n            }\n            { status === 'blank' &&\n              <div className={classes.helpMessage}>\n                <Typography variant=\"subtitle2\">使用說明</Typography>\n                <Typography variant=\"body2\">\n                  <ol>\n                    <li>本系統不含死刑與無期徒刑之案件。</li>\n                    <li>「法定加重及法定減輕事由」，點選「V」清單可拉出/收攏，若有合乎相關條目情狀，請點選。</li>\n                    <li>「法定科刑注意事項」中，若判斷該款應加重刑期，將滑桿向右方「+」拉動（呈現紅色）；若判斷該款應減輕刑期：將滑桿向左方「-」拉動（呈現綠色）；若感覺中立：則不移動滑桿，維持預設。</li>\n                    <li>按下「計算」按鈕會出現估計結果。</li>\n                    <li>估計結果含四個項目：「量刑估計區間」、「因素權重瀑布圖」（輸入因子對量刑估計區間的影響權重，單位：月）、「相似判決」（系統判斷與輸入因子相似的判決）、「判決細部比較」（系統考量之輸入因子與系統中判決之因子比較）。</li>\n                  </ol>\n                </Typography>\n              </div>\n            }\n            { status === 'error' &&\n              <div className={classes.message}>\n                <Typography variant=\"body1\">伺服器或網路錯誤，請再試一次。</Typography>\n                { errorCode && <Typography variant=\"caption\">{ errorCode }</Typography> }\n              </div>\n            }\n          </div>\n        </Grid>\n      </Grid>\n    </div>\n  );\n}\n","/*! sentencing-ui: https://github.com/rschiang/sentencing-ui */\n\nimport React from 'react';\nimport { hydrate, render } from 'react-dom';\nimport CSSBaseline from '@material-ui/core/CssBaseline';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport theme from './theme';\nimport Page from './parts/Page';\n\nconst rootElement = document.getElementById('root');\nconst App = (\n  <ThemeProvider theme={theme}>\n    <CSSBaseline />\n    <Page />\n  </ThemeProvider>\n);\n\nif (rootElement.hasChildNodes())\n  hydrate(App, rootElement);\nelse\n  render(App, rootElement);\n"],"sourceRoot":""}